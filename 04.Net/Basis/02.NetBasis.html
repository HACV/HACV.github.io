<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>『工程项目』网络基础 | HACV</title>
    <meta name="description" content="Personal Blog Website">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.8eb0d87d.css" as="style"><link rel="preload" href="/assets/js/app.75a0c693.js" as="script"><link rel="preload" href="/assets/js/56.2bc3cb50.js" as="script"><link rel="prefetch" href="/assets/js/10.83062f3e.js"><link rel="prefetch" href="/assets/js/100.e4d41340.js"><link rel="prefetch" href="/assets/js/101.8fe8f384.js"><link rel="prefetch" href="/assets/js/102.e443de18.js"><link rel="prefetch" href="/assets/js/103.185b177c.js"><link rel="prefetch" href="/assets/js/104.27accf7f.js"><link rel="prefetch" href="/assets/js/105.b09be79e.js"><link rel="prefetch" href="/assets/js/106.087d3b7d.js"><link rel="prefetch" href="/assets/js/107.e33f6d4a.js"><link rel="prefetch" href="/assets/js/108.2b01d9fe.js"><link rel="prefetch" href="/assets/js/109.0783daf7.js"><link rel="prefetch" href="/assets/js/11.fd079fa0.js"><link rel="prefetch" href="/assets/js/110.cdbfb3cc.js"><link rel="prefetch" href="/assets/js/111.a2975c0d.js"><link rel="prefetch" href="/assets/js/112.f7351e5c.js"><link rel="prefetch" href="/assets/js/113.a1095d74.js"><link rel="prefetch" href="/assets/js/114.7a5418bb.js"><link rel="prefetch" href="/assets/js/115.95e63cf3.js"><link rel="prefetch" href="/assets/js/116.f5811889.js"><link rel="prefetch" href="/assets/js/117.12420d4f.js"><link rel="prefetch" href="/assets/js/118.87cf32fe.js"><link rel="prefetch" href="/assets/js/119.00cc8c2a.js"><link rel="prefetch" href="/assets/js/12.d2cc7c71.js"><link rel="prefetch" href="/assets/js/120.15fa6971.js"><link rel="prefetch" href="/assets/js/121.8ff0398d.js"><link rel="prefetch" href="/assets/js/122.ca537a93.js"><link rel="prefetch" href="/assets/js/123.a72e6ad6.js"><link rel="prefetch" href="/assets/js/124.91dafea9.js"><link rel="prefetch" href="/assets/js/125.8bc0e1f0.js"><link rel="prefetch" href="/assets/js/126.c756b55a.js"><link rel="prefetch" href="/assets/js/127.9d825a4d.js"><link rel="prefetch" href="/assets/js/13.f6656bcc.js"><link rel="prefetch" href="/assets/js/14.a6f7c2e5.js"><link rel="prefetch" href="/assets/js/15.3390a044.js"><link rel="prefetch" href="/assets/js/16.ab6fea6a.js"><link rel="prefetch" href="/assets/js/17.37ee5d55.js"><link rel="prefetch" href="/assets/js/18.861d8a04.js"><link rel="prefetch" href="/assets/js/19.67f6f15a.js"><link rel="prefetch" href="/assets/js/2.7f88d577.js"><link rel="prefetch" href="/assets/js/20.a62aa946.js"><link rel="prefetch" href="/assets/js/21.30eef990.js"><link rel="prefetch" href="/assets/js/22.f9d442d2.js"><link rel="prefetch" href="/assets/js/23.b8e5900d.js"><link rel="prefetch" href="/assets/js/24.950e82ab.js"><link rel="prefetch" href="/assets/js/25.4832ccbf.js"><link rel="prefetch" href="/assets/js/26.66c90346.js"><link rel="prefetch" href="/assets/js/27.24e09fe3.js"><link rel="prefetch" href="/assets/js/28.ff934f1e.js"><link rel="prefetch" href="/assets/js/29.0fa59da6.js"><link rel="prefetch" href="/assets/js/3.283cf0e9.js"><link rel="prefetch" href="/assets/js/30.e877ce73.js"><link rel="prefetch" href="/assets/js/31.e9621816.js"><link rel="prefetch" href="/assets/js/32.9df427e2.js"><link rel="prefetch" href="/assets/js/33.2dff3432.js"><link rel="prefetch" href="/assets/js/34.619c43fe.js"><link rel="prefetch" href="/assets/js/35.46363e55.js"><link rel="prefetch" href="/assets/js/36.34cb6f17.js"><link rel="prefetch" href="/assets/js/37.2f0452e7.js"><link rel="prefetch" href="/assets/js/38.80f61b7d.js"><link rel="prefetch" href="/assets/js/39.4a4562e2.js"><link rel="prefetch" href="/assets/js/4.468bbcf4.js"><link rel="prefetch" href="/assets/js/40.333d219c.js"><link rel="prefetch" href="/assets/js/41.64a2f0de.js"><link rel="prefetch" href="/assets/js/42.d83e3e95.js"><link rel="prefetch" href="/assets/js/43.7a2d41da.js"><link rel="prefetch" href="/assets/js/44.057f35a8.js"><link rel="prefetch" href="/assets/js/45.a1f6a39d.js"><link rel="prefetch" href="/assets/js/46.a99e1e82.js"><link rel="prefetch" href="/assets/js/47.2213bd61.js"><link rel="prefetch" href="/assets/js/48.93adbe43.js"><link rel="prefetch" href="/assets/js/49.e2aac4ba.js"><link rel="prefetch" href="/assets/js/5.e494e309.js"><link rel="prefetch" href="/assets/js/50.011af161.js"><link rel="prefetch" href="/assets/js/51.b7b06a09.js"><link rel="prefetch" href="/assets/js/52.a67a7916.js"><link rel="prefetch" href="/assets/js/53.f182e1e4.js"><link rel="prefetch" href="/assets/js/54.e5e022d5.js"><link rel="prefetch" href="/assets/js/55.8e5ee2df.js"><link rel="prefetch" href="/assets/js/57.8c5d0490.js"><link rel="prefetch" href="/assets/js/58.02836928.js"><link rel="prefetch" href="/assets/js/59.3be07576.js"><link rel="prefetch" href="/assets/js/6.ddf866bc.js"><link rel="prefetch" href="/assets/js/60.80b9c03b.js"><link rel="prefetch" href="/assets/js/61.d8d3605d.js"><link rel="prefetch" href="/assets/js/62.8d7b1d97.js"><link rel="prefetch" href="/assets/js/63.01b6ec51.js"><link rel="prefetch" href="/assets/js/64.2a1dc56b.js"><link rel="prefetch" href="/assets/js/65.e4d03ad4.js"><link rel="prefetch" href="/assets/js/66.92ce6eda.js"><link rel="prefetch" href="/assets/js/67.03110523.js"><link rel="prefetch" href="/assets/js/68.5bcba619.js"><link rel="prefetch" href="/assets/js/69.da609982.js"><link rel="prefetch" href="/assets/js/7.3abebc6b.js"><link rel="prefetch" href="/assets/js/70.efc7e71e.js"><link rel="prefetch" href="/assets/js/71.8ca6e177.js"><link rel="prefetch" href="/assets/js/72.68412fae.js"><link rel="prefetch" href="/assets/js/73.2cc87eaf.js"><link rel="prefetch" href="/assets/js/74.7c688494.js"><link rel="prefetch" href="/assets/js/75.a72b5de3.js"><link rel="prefetch" href="/assets/js/76.b96325de.js"><link rel="prefetch" href="/assets/js/77.182090ca.js"><link rel="prefetch" href="/assets/js/78.427e9b18.js"><link rel="prefetch" href="/assets/js/79.42c66964.js"><link rel="prefetch" href="/assets/js/8.3578d50a.js"><link rel="prefetch" href="/assets/js/80.309238e9.js"><link rel="prefetch" href="/assets/js/81.3c8759f5.js"><link rel="prefetch" href="/assets/js/82.b7fc6946.js"><link rel="prefetch" href="/assets/js/83.9d1937d6.js"><link rel="prefetch" href="/assets/js/84.ca98c3dc.js"><link rel="prefetch" href="/assets/js/85.a11deacc.js"><link rel="prefetch" href="/assets/js/86.d1dd2f34.js"><link rel="prefetch" href="/assets/js/87.777b69c3.js"><link rel="prefetch" href="/assets/js/88.d648034b.js"><link rel="prefetch" href="/assets/js/89.61622185.js"><link rel="prefetch" href="/assets/js/9.b9b10179.js"><link rel="prefetch" href="/assets/js/90.3a919809.js"><link rel="prefetch" href="/assets/js/91.afe4cad9.js"><link rel="prefetch" href="/assets/js/92.69b03844.js"><link rel="prefetch" href="/assets/js/93.0f09ecba.js"><link rel="prefetch" href="/assets/js/94.2360c71a.js"><link rel="prefetch" href="/assets/js/95.6653d797.js"><link rel="prefetch" href="/assets/js/96.c546f480.js"><link rel="prefetch" href="/assets/js/97.8e4b30ee.js"><link rel="prefetch" href="/assets/js/98.3ef64523.js"><link rel="prefetch" href="/assets/js/99.2fd9778f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8eb0d87d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HACV</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/01.About/" class="nav-link">✡️About</a></div><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link">💻操作系统</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link router-link-active">☁️网络</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">☕️软件工程</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">💾数据库</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">🐉计算机内功</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">🔧Tools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">⚛️C/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/01.About/" class="nav-link">✡️About</a></div><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link">💻操作系统</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link router-link-active">☁️网络</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">☕️软件工程</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">💾数据库</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">🐉计算机内功</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">🔧Tools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">⚛️C/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>『工程项目』网络基础</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/04.Net/Basis/02.NetBasis.html#『工程项目』网络基础" class="sidebar-link">『工程项目』网络基础</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#一、a、b、c类私有地址" class="sidebar-link">一、A、B、C类私有地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#（1）什么是a-b-c类地址？（zhihu）" class="sidebar-link">（1）什么是a.b.c类地址？（zhihu）</a></li></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#二、记忆（单工-半双工-全双工）" class="sidebar-link">二、记忆（单工-半双工-全双工）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#三、『数据』封装过程『重要』" class="sidebar-link">三、『数据』封装过程『重要』</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#四、4种网络连接『重要』" class="sidebar-link">四、4种网络连接『重要』</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#_1、nat『映射』" class="sidebar-link">1、NAT『映射』</a></li><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#_2、nat『穿透』" class="sidebar-link">2、NAT『穿透』</a></li></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#五、tcp3次握手和4次挥手" class="sidebar-link">五、TCP3次握手和4次挥手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#（1）连接时候为什么需要三次握手" class="sidebar-link">（1）连接时候为什么需要三次握手</a></li><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#（2）为什么断开的时候需要四次挥手" class="sidebar-link">（2）为什么断开的时候需要四次挥手</a></li><li class="sidebar-sub-header"><a href="/04.Net/Basis/02.NetBasis.html#（3）如何理解tcp流式传输" class="sidebar-link">（3）如何理解TCP流式传输?</a></li></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#六、端口号记忆" class="sidebar-link">六、端口号记忆</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/04.Net/Basis/02.NetBasis.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p>这些知识，可以说，能够串起来很多现实中的说法
并且，这些知识<font style="background:yellow;">加强了国内教材上未强调的知识</font>。</p> <h2 id="『工程项目』网络基础"><a href="#『工程项目』网络基础" class="header-anchor">#</a> 『工程项目』网络基础</h2> <h2 id="一、a、b、c类私有地址"><a href="#一、a、b、c类私有地址" class="header-anchor">#</a> 一、A、B、C类私有地址</h2> <p>私有地址(privateaddress)也叫专用地址（私网IP），它们<font style="background:yellow;">不会在全球使用，只具有本地意义。</font></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>A类私有地址：<span class="token number">10.0</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">/</span><span class="token number">8</span>，范围是：<span class="token number">10.0</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">~</span><span class="token number">10.255</span><span class="token punctuation">.</span><span class="token number">255.255</span>
B类私有地址：<span class="token number">172.16</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">/</span><span class="token number">12</span>，范围是：<span class="token number">172.16</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">~</span><span class="token number">172.31</span><span class="token punctuation">.</span><span class="token number">255.255</span>
C类私有地址：<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">/</span><span class="token number">16</span>，范围是：<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">~</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">255.255</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img alt src="https://uploadfiles.nowcoder.com/images/20171101/9430388_1509499582678_79540D335CBD37FB9AC1EC8191B91765"> <p>私有IP地址范围：<br>
A: 10.0.0.0~10.255.255.255 即10.0.0.0/8<br>
B:172.16.0.0~172.31.255.255即172.16.0.0/12<br>
C:192.168.0.0~192.168.255.255 即192.168.0.0/16</p> <h3 id="（1）什么是a-b-c类地址？（zhihu）"><a href="#（1）什么是a-b-c类地址？（zhihu）" class="header-anchor">#</a> （1）什么是a.b.c类地址？（zhihu）</h3> <p><a href="https://www.zhihu.com/question/302935308/answer/544123478" target="_blank" rel="noopener noreferrer">知乎<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
作者：架在天国的陆
链接：https://www.zhihu.com/question/302935308/answer/544123478
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p> <p>1． A类IP地址一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1亿多个主机。<strong>(中国有4个A类IPv4地址)</strong> <br>
2． B类IP地址一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网络能容纳6万多个主机 。<br>
3． C类IP地址一个C类IP地址由3字节的网络地址和1字节的主机地址组成，网络地址的最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络可达209万余个，每个网络能容纳254个主机。IP地址由4个字节组成(4*8=32 bit)，采用点分十进制标记法，即X.X.X.X的形式，用4个十进制数来对应表示4个字节的二进制数值，数值中间用“.”隔开。每个十进制数的取值在 0～255之间。由于A类地址中首位为0(0XXXXXXX)，所以其第1个十进制数的取值范围被限定于1～126(2的7次方128个)之间(0和 127另有指定)。同理，B类地址中第1、2位为10(10XXXXXX)，第1个十进制数的取值范围被限定于128～191(2的6次方64个)之间。 C类地址中第1、2、3位为110(110XXXXX)，第1个十进制数的取值范围被限定于192～223(2的5次方32个)之间。</p> <p>默认情况下FTP协议使用TCP端口中的 20和21这两个端口，其中20用于传输数据，21用于传输控制。怎么不记混呢，就是0和1的区别，**0是O管道负责传输，1是把手，负责控制。 **</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>TCP  21 端口： FTP  文件传输服务
TCP  23 端口： TELNET  终端仿真服务
TCP  25 端口： SMTP  简单邮件传输服务
UDP  53 端口： DNS  域名解析服务
TCP  80 端口： HTTP  超文本传输服务
TCP  110 端口： POP3  “邮局协议版本3”使用的端口
TCP  443 端口： HTTPS  加密的超文本传输服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="二、记忆（单工-半双工-全双工）"><a href="#二、记忆（单工-半双工-全双工）" class="header-anchor">#</a> 二、记忆（单工-半双工-全双工）</h2> <p>单工模式：
我打你 你不能还手  打你这个过程是发送  你抗揍这个过程是接收
半双工模式：
我打你  你不能还手  过一会儿 你打我 我不能还手
全双工模式：
俩人互殴  我俩可以同时出拳（同时发送）同时抗揍（同时接收）😊😊😊😊😊😊
23333</p> <h2 id="三、『数据』封装过程『重要』"><a href="#三、『数据』封装过程『重要』" class="header-anchor">#</a> 三、『数据』封装过程『重要』</h2> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>（消息）数据—&gt;段—&gt;包—&gt;帧—&gt;比特流
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>记忆方法：</li> <li>TCP中是流式数据，抽刀断（<strong>段</strong>）水水更流『传输层』</li> <li>路由器在《自顶向下，计算机网络》中长得像（<strong>包</strong>）子『网络层』</li></ul> <p>从上往下数</p> <table><thead><tr><th>7层模型</th> <th>名字</th></tr></thead> <tbody><tr><td>应用层，表示层，会话层</td> <td>PDU（协议数据单元）<strong>消息（数据）</strong></td></tr> <tr><td>传输层</td> <td>PDU<strong>段</strong>（数据段）</td></tr> <tr><td>网络层</td> <td>PDU<strong>包</strong></td></tr> <tr><td>链路层</td> <td>PDU<strong>帧</strong></td></tr> <tr><td>物理层</td> <td>PDU<strong>比特</strong></td></tr></tbody></table> <blockquote><p>注意：</p> <p>RFC文档中将TCP的运输层分组称为『报文<strong>段</strong>』，UDP的分组称为『数据<strong>报</strong>』，并且将网络层分组称为『数据<strong>报</strong>』</p> <p>《计算机网络-自顶向下方法》一书中，看到这个之后，为了避免混淆，将TCP/UDP的分组统称为『报文段』</p></blockquote> <h2 id="四、4种网络连接『重要』"><a href="#四、4种网络连接『重要』" class="header-anchor">#</a> 四、4种网络连接『重要』</h2> <table><thead><tr><th>公网-公网</th> <th>直接访问</th></tr></thead> <tbody><tr><td>公网-私网</td> <td>NAT映射</td></tr> <tr><td>私网-公网</td> <td>NAT映射</td></tr> <tr><td>私网-私网</td> <td>NAT映射、（公网的服务器）打洞机制</td></tr></tbody></table> <p>实际上，要是对私网IP进一步划分的话，还分为局域网，或者叫内网。 这个的话，不需要打洞或者NAT映射机制</p> <blockquote><p>记忆方法：</p> <p>ARP和RARP，对应短和长</p> <p>IP和MAC，对应短和长</p></blockquote> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>ARP是借助IP地址，请求MAC地址	『短短长』
RARP是借助MAC地址，请求IP地址	『长长短』
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>IP段，我们了解
它记录了32位源IP和32位目的IP就好了
因为我们不用做路由器开发，
当然如果你要做的话，那你需要了解深入。</p> <p>TCP有序列号和确认序列号，因为他要对发送的东西，是否成功到达进行校验。所以有这2 者之分。</p> <p>问题：
根据IP段的那个规定，16位的总长度（字节数）65535
但是我们的数据链路层却1500
前者比后者大，这不冲突了吗？</p> <p>这个时候，我们引出两个问题，
我们的IP格式，向下是不是非得封装以太网帧？？？
不是的
我们上午介绍的只是，TCP/IP4层模型当中，几种典型的协议，（链路层中，典型协议——以太网帧协议）
也就是说，你一般情况下是按照这个方式去访问。</p> <p>如果说你所做的数据传输是比较特殊的数据传输，我可不可以换协议？？
可以的
比如说做网络多媒体的，3D动画。</p> <p>所以前面的解决方案，可以吧IP的拆分成可以的。
当然，发到那边要再组装，</p> <p>此外，我们这样的IP很大，我们可以不适用默认的协议，（不封装以太网帧）
我可不可以自定义协议啊？可以的
只要我的协议能够在网络当中传输就行了，这不就可以解决这个1500
<strong>这也从一方面说明了，我们的IP协议，不单单能够支持以太网帧协议，我们还能支持其他协议。</strong> <font style="background:yellow;">我们不要弄得太死板这些了，不是说我们IP协议上，就只能是TCP或者UDP协议，其实还能是其他的！！！！只是我们没讲。而且我们网络层，谁说一定是IP，还可以是ICMP，IGMP啥的。还有我们链路层，谁说一定要是以太网帧协议，还可以是用户自定义的，只要我们能够保证数据能够正常传输。我遵循你双绞线，或者同轴电缆，光纤它传输的基本要求，不就可以完成传输嘛</font></p> <h3 id="_1、nat『映射』"><a href="#_1、nat『映射』" class="header-anchor">#</a> 1、NAT『映射』</h3> <p>NAT映射机制</p> <p>（数据包在网络当中<strong>传递</strong>里面，经常用到的一些技术名词，主要里面涉及到两个，就是上面两个）</p> <ul><li>提出囧况：<br>
私网IP在公网不可见<br>
比如我们『192.168.X.X』是局域网的IP，只能在局域网中用，进入到公网的IP不会是这样的IP。换言之，这样的IP在公网中是不可见的。</li></ul> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>在广州发信息给上海，甚至可能，
广州，这边局域网IP是192.168.3.5
上海目的地的局域网IP也是192.168.3.5
这个时候，我们的数据怎么传递呢？
看上去，源IP和目的IP是一样的。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>实际上，对于我们大家来说，我们的网络环境当中，首先数据从网卡 出来<br>
数据包不是直接发送到你路由器上（先前那样画，只是为了标出重点）<br>
而是发送到交换机上！！！交换机给你进行IP地址的转发，发给谁？发给路由器，但是我们说，绝大多数的路由器自带交换机的功能啊！！因此我们说，路由器可以替代交换机的基本作用。</li> <li>为什么，两者能够发送数据呢？？</li> <li>其实在我们的<strong>路由器</strong>当中，除了我们提到的『路由表』之外，其实还有一个『NAT映射表』这个NAT映射表和我们的路由表组织形式差不多，都是表结构。</li> <li>概念：<font style="background:yellow;">NAT映射表记录的是你当前，连接到我们这个<strong>路由器</strong>的终端的<strong>局域IP地址</strong>和公网IP地址的对应关系。
也就是说，路由器它本身所具有的IP，应该是一个公网IP（在整个网络环境当中应该是唯一的）</font></li></ul> <blockquote><p>所以，广州和上海，局域网IP还一样的，如何通信？？</p></blockquote> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>做法：
我的QQ,本地192.168.1.35 ：8000端口号
那么到达第一个路由器（接入的）
在『NAT映射表』中记录，把192.168.1.35：8000映射为当前路由器的IP地址和端口号
比如
192.168.1.35：8000映射为123.24.56.78：1000
这样，这个数据包在向外面进行转发的时候，所有的路由器在接收到数据包的时候。
就不认为数据包是192.168.1.35发出来的了『透明的，将私网给隐藏了』
而是认为，源数据的源IP是123.24.56.78。然后，后续操作就和以前的差不多了。『递归』
因此这样就实现了：虽然我的公网IP只有一个，但是我的这个公网IP可以下发出多个私有IP（局域网）
实际上我们现在用的网络环境，不仅是这样的下发，我们还会再下发。『多层NAT映射，因为人口的增长，这样越来越多层，网络传输就会效率低，所以才大力推进IPv6』
比如，我们自己家的路由器，实际上，你们家里面几个人『对外来说』IP只有一个，但是我们每个人的IP地址不一样。因为我们的IP地址都是私有IP地址。（注意，分清私有IP和公网IP）

NAT映射表解决了，我们中国公网IP地址这么少，但是，到现在能不能访问啊？能够上网。显然，私网和公网IP通信，需要NAT映射表，公网与公网IP不需要用NAT映射表。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2、nat『穿透』"><a href="#_2、nat『穿透』" class="header-anchor">#</a> 2、NAT『穿透』</h3> <ul><li>NAT穿透，俗称“<strong>打洞机制</strong>”，也称&quot;内网穿透&quot;</li></ul> <blockquote><p>打洞机制的由来：</p> <p>比如QQ聊天，需要经过腾讯服务器，不能直接走。但是显然这个有缺点，聊天文字还好。
那么，视频电话呢？怎么办，要是从腾讯服务器转一手过去，效率会很低的，因为实时性要求高。</p> <p>打洞：主要是为了提高，数据传输的效率。</p></blockquote> <p>实际上也和你的这个路由器有一定的关系，
因为你的数据包从你的这个计算机里面出来了，所有的行为，实际上都是由路由器控制了。</p> <ul><li>『路由器默认的保护机制』：陌生的IP，第一次给我发送数据包，我会把这个数据包屏蔽掉，或者说，丢弃掉，主要是为了防止网络环境的恶意攻击。</li></ul> <p><strong>解决方法</strong>：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>要想要视频通话的A和B正常通信。
必须，A和B对于这些路由器是熟悉的才行。
这个时候，我们需要在这些普通的路由器直接打个洞。（像老鼠掏洞一样）
因为，原来走法是，要绕道腾讯服务器，现在的走法是直接在其他的路由器直接，掏个洞，钻过去。

但是为了防止路由器，屏蔽陌生IP的话，这个时候，腾讯就参与进来了。因为，我们知道我们的QQ在登录的时候，会访问腾讯的服务器，这样，腾讯和A之间，还有腾讯和B直接的路由器就对这些IP不陌生了。
现在腾讯服务器做了一件事：打洞。
腾讯公网的服务器，来帮助我们。两台私有IP之间完成打洞。
当他把洞打好之后（所以，到达咋样打洞的，俺还是不晓得，），达到的效果就是，A和B直接可以实时通信了。所以，打洞是通过腾讯的公网的服务器来做的！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>所以说，我们要想打洞的话，势必要借助一个公网IP。</strong>
腾讯发现A和B要发起视频聊天，所以腾讯就不给他们转发数据了，那样太慢了，</p> <ul><li><p>打洞机制是谁来完成的？是服务器（公网方服务器）</p></li> <li><p>当然，私网中的局域网的话，就不需要NAT映射和打洞机制。和公网和公网，类似，可以直接访问！</p></li> <li><p>这也解释了，为什么，两个在局域网设置IP，不能一样，因为一样的话，就会显示冲突了。</p></li></ul> <h2 id="五、tcp3次握手和4次挥手"><a href="#五、tcp3次握手和4次挥手" class="header-anchor">#</a> 五、TCP3次握手和4次挥手</h2> <ul><li>希望用专业术语说，虽然打比方能够讲清楚</li></ul> <h3 id="（1）连接时候为什么需要三次握手"><a href="#（1）连接时候为什么需要三次握手" class="header-anchor">#</a> （1）连接时候为什么需要三次握手</h3> <p>（1）通俗解释1</p> <p>三次握手，就是说三次收发消息的过程。</p> <p>一个完整的TCP连接，他有一个标准就是说：通讯的双方，都能确认双方是能够正常收发的！<strong>（注意，收和发）</strong></p> <p>C客户端——》S服务器</p> <p>S收到后，可以确认：</p> <p>S就知道</p> <ul><li>[x] C能正常发（确认）</li> <li>[ ] C能正常收</li> <li>[ ] S能正常发</li> <li>[x] S能正常收（确认）</li></ul> <p>C客户端《——S服务器</p> <p>S就知道</p> <ul><li>[x] C能正常发（确认）</li> <li>[x] C能正常收（确认）</li> <li>[x] S能正常发（确认）</li> <li>[x] S能正常收（确认）</li></ul> <p>C客户端——》S服务器</p> <ul><li>[x] C能正常发</li> <li>[x] C能正常收（确定）</li> <li>[x] S能正常发（确定）</li> <li>[x] S能正常收</li></ul> <h3 id="（2）为什么断开的时候需要四次挥手"><a href="#（2）为什么断开的时候需要四次挥手" class="header-anchor">#</a> （2）为什么断开的时候需要四次挥手</h3> <p><a href="https://baijiahao.baidu.com/s?id=1654225744653405133&wfr=spider&for=pc" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>牛客：
因为tcp是全双工模式，接收到FIN时意味将没有数据再发来，但是还是可以继续发送数据，所以断开连接时必须是四次握手</p> <p>百度：
https://baike.baidu.com/item/tcp%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/7922126?fr=aladdin
讲得很好：
这是因为服务端的LISTEN状态下的SOCKET当收到SYN报文的建连请求后，它<strong>可以把ACK和SYN（ACK起应答作用，而SYN起同步作用）放在一个报文里来发送</strong>。</p> <p>但关闭连接时，当收到对方的FIN报文通知时，它仅仅表示对方没有数据发送给你了；但<strong>未必你所有的数据都全部发送给对方了</strong>，所以你可以<strong>未必会马上会关闭SOCKET</strong>,也即你可能还需要发送一些数据给对方之后，再发送FIN报文给对方来表示你同意可以关闭连接了，<strong>所以它这里的ACK报文和FIN报文多数情况下都是分开发送的</strong>。</p> <h3 id="（3）如何理解tcp流式传输"><a href="#（3）如何理解tcp流式传输" class="header-anchor">#</a> （3）如何理解TCP流式传输?</h3> <p>（摘自知乎）</p> <p>我看了一些博客和书，都会说TCP是流式传输，那么TCP传输到底因为哪些特性，能被称为流式。</p> <p>和UDP的数据报传输比有哪些区别呢。</p> <p>流的数据是没有边界的</p> <p>udp每一个数据包边界划的明明白白</p> <p>所以它不是流</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>假设你是udp服务器
我想发三段数据给你 按顺序发
分别是
abc
bbbbbb
qqqq
你收到的是三个包 然后告诉我 分别是
abc
bbbbbb
qqqq
好了现在用tcp
你收到了abcbbbbbbqqqq
那么你告诉我
我发的三段数据是什么？
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="六、端口号记忆"><a href="#六、端口号记忆" class="header-anchor">#</a> 六、端口号记忆</h2> <ul><li><p>FTP的</p></li> <li><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>默认情况下FTP协议使用TCP端口中的 <span class="token number">20</span>和<span class="token number">21</span>这两个端口，其中<span class="token number">20</span>用于传输数据，<span class="token number">21</span>用于传输控制。怎么不记混呢，就是<span class="token number">0</span>和<span class="token number">1</span>的区别，<span class="token number">0</span>是O管道负责传输，<span class="token number">1</span>是把手，负责控制。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>参考自<a href="https://www.nowcoder.com/profile/6206174" target="_blank" rel="noopener noreferrer">牛客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>评论</p></li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li>[美] James F.Kurose / [美] Keith W.Ross，《<a href="https://book.douban.com/subject/26176870/" target="_blank" rel="noopener noreferrer">计算机网络-自顶向下方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》</li> <li>[日]竹下隆史 / [日]村山公保 / [日]荒井透 / [日]苅田幸雄，《<a href="https://book.douban.com/subject/24737674/" target="_blank" rel="noopener noreferrer">图解TCP/IP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》</li> <li>[日]上野宣，《<a href="https://book.douban.com/subject/25863515/" target="_blank" rel="noopener noreferrer">图解HTTP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>》</li> <li>花生壳，<a href="https://hsk.oray.com/news/6783.html" target="_blank" rel="noopener noreferrer">内网穿透原理是什么？nat内网穿透如何实现？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.75a0c693.js" defer></script><script src="/assets/js/56.2bc3cb50.js" defer></script>
  </body>
</html>
