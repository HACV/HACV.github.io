(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{236:function(v,_,e){"use strict";e.r(_);var n=e(0),s=Object(n.a)({},(function(){var v=this.$createElement;this._self._c;return this._m(0)}),[function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"底层原理研究工具集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#底层原理研究工具集"}},[v._v("#")]),v._v(" 底层原理研究工具集")]),v._v(" "),e("p",[v._v("😄")]),v._v(" "),e("h2",{attrs:{id:"二、linux下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、linux下"}},[v._v("#")]),v._v(" 二、Linux下")]),v._v(" "),e("h3",{attrs:{id:"_1）gcc，gcc编译器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1）gcc，gcc编译器"}},[v._v("#")]),v._v(" 1）gcc，GCC编译器")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("-E")]),v._v(":只进行预处理并把预处理结果输出")]),v._v(" "),e("li",[e("code",[v._v("-c")]),v._v(":只编译不链接。")]),v._v(" "),e("li",[e("code",[v._v("-o <filename>")]),v._v(":指定输出文件名")]),v._v(" "),e("li",[e("code",[v._v("-S:")]),v._v("输出编译后的汇编代码文件")]),v._v(" "),e("li",[e("code",[v._v("-O0")]),v._v(":关闭所有优化选项。（前面是大写字母O，后面是数字0）")])]),v._v(" "),e("div",{staticClass:"language-txt line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[v._v("`-I`;指定头文件路径  \n`-e` name:  \n`-e name`:指定name为程序入口地址    \n`-ffreestanding`;编译独立的程序，不会自动链接C运行库、启动文件等   \n`-finline-functions,- fno. inline functions`:启用/关闭内联函数  \n`-g`:在编译结果中加入调试信息，-ggdb 就是加入GDB调试器能够识别的格式  \n`-L <directory>`:指定链接时查找路径，多个路径之间用冒号隔开  \n`-nostarfiles`:不要链接启动文件，比如crtbegin.o、crtend.o  \n`-nostdlib`:不要链接标准库文件，主要是C运行库  \n\n`-shared`:产生共享对象文件  \n`-static`:使用静态链接  \n`-Wall`:对源代码中的多数编译警告进行启用  \n`-fPIC`:使用地址无关代码模式进行编译  \n`-PIE`:使用地址无关代码模式编译可执行文件  \n`-XLinker <option>`:把option传递给链接器  \n`-Wl <option>`:把option传递给链接器，与上面的选项类似  \n`-fomit-frame-pointer`:禁止使用EBP作为函数帧指针  \n`-fno-buitin`:禁止GCC编译器内置函数  \n`-fno-stack-\tprotector`:是指关闭堆栈保护功能  \n`-ffunctionsections`:将每个函数编译到独立的代码段  \n`-fdata-sections`:将全局/静态变量编译到独立的数据段  \n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br"),e("span",{staticClass:"line-number"},[v._v("5")]),e("br"),e("span",{staticClass:"line-number"},[v._v("6")]),e("br"),e("span",{staticClass:"line-number"},[v._v("7")]),e("br"),e("span",{staticClass:"line-number"},[v._v("8")]),e("br"),e("span",{staticClass:"line-number"},[v._v("9")]),e("br"),e("span",{staticClass:"line-number"},[v._v("10")]),e("br"),e("span",{staticClass:"line-number"},[v._v("11")]),e("br"),e("span",{staticClass:"line-number"},[v._v("12")]),e("br"),e("span",{staticClass:"line-number"},[v._v("13")]),e("br"),e("span",{staticClass:"line-number"},[v._v("14")]),e("br"),e("span",{staticClass:"line-number"},[v._v("15")]),e("br"),e("span",{staticClass:"line-number"},[v._v("16")]),e("br"),e("span",{staticClass:"line-number"},[v._v("17")]),e("br"),e("span",{staticClass:"line-number"},[v._v("18")]),e("br"),e("span",{staticClass:"line-number"},[v._v("19")]),e("br"),e("span",{staticClass:"line-number"},[v._v("20")]),e("br"),e("span",{staticClass:"line-number"},[v._v("21")]),e("br"),e("span",{staticClass:"line-number"},[v._v("22")]),e("br")])]),e("h3",{attrs:{id:"_2）ld，gnu链接器（linker）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2）ld，gnu链接器（linker）"}},[v._v("#")]),v._v(" 2）ld，GNU链接器（Linker）")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("-static")]),v._v(":静态链接。")]),v._v(" "),e("li",[e("code",[v._v("-I<libname>")]),v._v(":指定链接某个库。")]),v._v(" "),e("li",[e("code",[v._v("-o")]),v._v(":指定输出文件名。")]),v._v(" "),e("li",[e("code",[v._v("-s")]),v._v(":清除输出文件中的符号信息。")]),v._v(" "),e("li",[e("code",[v._v("-S")]),v._v(":清除输出文件中的调试信息。")])]),v._v(" "),e("div",{staticClass:"language-txt line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[v._v("`-e name`:指定name为程序尺口。\n`-r`: 合并目标文件，不进行最终链接。\n`-L <directory>`:指定链接时查找路径，多个路径之间用冒号隔开。\n`-M`;将链接时的符号和地址输出成-个映射文件。\n`-T <scriptfile>`:指定链接脚本文件。\n`-version-script <file>`:指定符号版本脚本文件。\n`-soname <name>`:指定输出共享库的SONAME.\n`-export dynamic`:将全局符号全部导出。\n`-verbose`:链接时输出详细信息。\n`-rpath <path>`:指定链接时库查找路径。\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br"),e("span",{staticClass:"line-number"},[v._v("5")]),e("br"),e("span",{staticClass:"line-number"},[v._v("6")]),e("br"),e("span",{staticClass:"line-number"},[v._v("7")]),e("br"),e("span",{staticClass:"line-number"},[v._v("8")]),e("br"),e("span",{staticClass:"line-number"},[v._v("9")]),e("br"),e("span",{staticClass:"line-number"},[v._v("10")]),e("br")])]),e("h3",{attrs:{id:"_3）objdump-gnu目标文件可执行文件查看器（反汇编常用）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3）objdump-gnu目标文件可执行文件查看器（反汇编常用）"}},[v._v("#")]),v._v(" 3）objdump, GNU目标文件可执行文件查看器（反汇编常用）")]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("-a")]),v._v(":列举.a文件中所有的目标文件。"),e("br"),v._v(" "),e("code",[v._v("-b")]),v._v(" bfdname:指定BFD名。"),e("br"),v._v(" "),e("code",[v._v("-C")]),v._v(":对于C++符号名进行反修饰(Demangle)."),e("br"),v._v(" "),e("code",[v._v("-g")]),v._v(":显示调试信息。"),e("br"),v._v(" "),e("code",[v._v("-d")]),v._v(":对包含机器指令的段进行反汇编。"),e("br"),v._v(" "),e("code",[v._v("-D")]),v._v(":对所有的段进行反汇编。"),e("br"),v._v(" "),e("code",[v._v("-f")]),v._v(":显示目标文件文件头。"),e("br"),v._v(" "),e("code",[v._v("-h")]),v._v(": 显示段表。"),e("br"),v._v(" "),e("code",[v._v("|")]),v._v(":显示行 号信息。"),e("br"),v._v(" "),e("code",[v._v("-p")]),v._v(":显示专有头部信息，具体内容取决于文件格式。"),e("br"),v._v(" "),e("code",[v._v("-r")]),v._v(":显示重定位信息。"),e("br"),v._v(" "),e("code",[v._v("-R")]),v._v(":显示动态链接重定位信息。"),e("br"),v._v(" "),e("code",[v._v("-S")]),v._v(":.显示文件所有内容。"),e("br"),v._v(" "),e("code",[v._v("-S")]),v._v(":显示源代码和反汇编代码(包含-d参数)。"),e("br"),v._v(" "),e("code",[v._v("-W")]),v._v(":显示文件中包含有DWARF调试信息格式的段。"),e("br"),v._v(" "),e("code",[v._v("-t")]),v._v(":显示文件中的符号表。"),e("br"),v._v(" "),e("code",[v._v("-T")]),v._v(":显示动态链接符号表。"),e("br"),v._v(" "),e("code",[v._v("-X")]),v._v("：显示文件的所有文件头。")])]),v._v(" "),e("h2",{attrs:{id:"一、windows下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、windows下"}},[v._v("#")]),v._v(" 一、Windows下")]),v._v(" "),e("ul",[e("li",[e("p",[e("strong",[v._v("VS自带工具")]),v._v(": cl,link,dumpbin的使用"),e("br"),v._v("\n打开方式：以安装了VS2012为例，3种方式可以在命令行中使用这些"),e("br"),v._v("\n1）去VS2012点安装目录，找到目录"),e("code",[v._v("Common7/Tools/vsvars32.bat")]),v._v("\n注：每次开机后都要双击此才可执行"),e("br"),v._v("\n2）优化1）查看了那个批处理文件，我们设置环境变量也能实现需求"),e("br"),v._v("\n3）去所有应用中找到一个黑色框框快捷键，名字叫"),e("code",[v._v("Developer Command Prompt for VS2012")]),v._v("\n双击它，在这个里面就可以使用这三个工具")])]),v._v(" "),e("li",[e("p",[v._v("此外，VS2012，我们在写代码的时候，也可以查看自己代码的"),e("strong",[v._v("反汇编")]),v._v("："),e("br"),v._v("\n1）先设置断点，注意是Debug版本，否则代码经过优化会多很多。"),e("br"),v._v("\n2）然后按钮F5或者点击Debug->Start Debuging程序会走到断点处停下  。\n3）然后点击按钮 Debug->Windows->DisAssambly即可看到汇编窗口\n对于3）和返回源代码，我喜欢的快捷键"),e("br"),v._v(" "),e("code",[v._v("右击+D（查看反汇编后的代码）")]),v._v(" "),e("code",[v._v("右击+G（从反汇编返回源代码）")])])])]),v._v(" "),e("h3",{attrs:{id:"_1）cl-msvc编译器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1）cl-msvc编译器"}},[v._v("#")]),v._v(" 1）cl,MSVC编译器")]),v._v(" "),e("p",[e("code",[v._v("/c")]),v._v(":只编译不链接"),e("br"),v._v(" "),e("code",[v._v("/Za")]),v._v(":禁止语言扩展"),e("br"),v._v(" "),e("code",[v._v("/link")]),v._v(":链接指定的模块或给链接器传递参数"),e("br"),v._v(" "),e("code",[v._v("/Od")]),v._v(":（大写字母O）禁止优化"),e("br"),v._v(" "),e("code",[v._v("/O2")]),v._v(":（大写字母O）以运行速度最快为目标优化"),e("br"),v._v(" "),e("code",[v._v("/O1")]),v._v(":（大写字母O）以最节省空间为目标优化"),e("br"),v._v(" "),e("code",[v._v("/GR或/GR-")]),v._v(":开启或关闭RTTI"),e("br"),v._v(" "),e("code",[v._v("/Gy")]),v._v(":开启函数级别链接"),e("br"),v._v(" "),e("code",[v._v("/GS或/GS-")]),v._v(":开启或关闭")]),v._v(" "),e("p",[e("code",[v._v("/Fa[file]")]),v._v(":输出汇编文件"),e("br"),v._v(" "),e("code",[v._v("/E")]),v._v(":只进行预处理并且把结果输出"),e("br"),v._v(" "),e("code",[v._v("/I")]),v._v(":指定头文件包含目录"),e("br"),v._v(" "),e("code",[v._v("/Zi")]),v._v(":启用调试信息"),e("br"),v._v(" "),e("code",[v._v("/LD")]),v._v(":编译产生DLL文件"),e("br"),v._v(" "),e("code",[v._v("/LDd")]),v._v(":编译产生DLL文件(调试版)"),e("br"),v._v(" "),e("code",[v._v("/MD")]),v._v(":与动态 多线程版本运行库MSVCRTLIB链接"),e("br"),v._v(" "),e("code",[v._v("MDd")]),v._v(":与调试版动态多线程版本运行库MSVCRTD.LIB链接"),e("br"),v._v(" "),e("code",[v._v("/MT")]),v._v(":与静态多线程版本运行库LIBCMTLIB链接"),e("br"),v._v(" "),e("code",[v._v("/MTd")]),v._v(":与调试版静态多线程版本运行库LIBCMTD.LIB链接")]),v._v(" "),e("h3",{attrs:{id:"_2）link，-msvc链接器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2）link，-msvc链接器"}},[v._v("#")]),v._v(" 2）link， MSVC链接器")]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("/BASE:address")]),v._v(":指定输出文件的基地址"),e("br"),v._v(" "),e("code",[v._v("/DEBUG")]),v._v(":输出调试模式版本"),e("br"),v._v(" "),e("code",[v._v("/DEF:filename")]),v._v(": 指定模块定义文件.DEF"),e("br"),v._v(" "),e("code",[v._v("/DEFAULTLIB:ibrary")]),v._v(":指定默认运行库"),e("br"),v._v(" "),e("code",[v._v("/DLL")]),v._v(": 产生DLL"),e("br"),v._v(" "),e("code",[v._v("/ENTRY:symbol")]),v._v(":指定程序入口"),e("br"),v._v(" "),e("code",[v._v("/EXPORT:symbol")]),v._v(": 指定某个符号为导出符号"),e("br"),v._v(" "),e("code",[v._v("/HEAP")]),v._v(":指定默认堆大小"),e("br"),v._v(" "),e("code",[v._v("/LIBPATH:dir")]),v._v(":指定链接时库搜索路径"),e("br"),v._v(" "),e("code",[v._v("/MAP[:filename]")]),v._v(": 产生链接MAP文件"),e("br"),v._v(" "),e("code",[v._v("/NODEFAULTLIB[:ibrary]")]),v._v(":禁止默认运行库"),e("br"),v._v(" "),e("code",[v._v("/OUT:filename")]),v._v(": 指定输出文件名"),e("br"),v._v(" "),e("code",[v._v("/RELEASE")]),v._v(":以发布版本产生输出文件"),e("br"),v._v(" "),e("code",[v._v("/STACK")]),v._v(": 指定默认栈大小"),e("br"),v._v(" "),e("code",[v._v("/SUBSYSTEM")]),v._v(": 指定子系统")])]),v._v(" "),e("h3",{attrs:{id:"_3）dumpbin-msvc的coff-pe文件查看器（反汇编常用）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3）dumpbin-msvc的coff-pe文件查看器（反汇编常用）"}},[v._v("#")]),v._v(" 3）dumpbin, MSVC的COFF/PE文件查看器（反汇编常用）")]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("/ALL")]),v._v(": 显示所有信息"),e("br"),v._v(" "),e("code",[v._v("/ARCHIVEMEMBERS")]),v._v(": 显示.LIB 文件中所有目标文件列表"),e("br"),v._v(" "),e("code",[v._v("/DEPENDENTS")]),v._v(":显示文件的动态链接依赖关系"),e("br"),v._v(" "),e("code",[v._v("/DIRECTIVES")]),v._v(": 显示链接器指示"),e("br"),v._v(" "),e("code",[v._v("/DISASM")]),v._v(": 显示反汇编"),e("br"),v._v(" "),e("code",[v._v("/EXPORTS")]),v._v(":显示导出函数表"),e("br"),v._v(" "),e("code",[v._v("/HEADERS")]),v._v(": 显示文件头"),e("br"),v._v(" "),e("code",[v._v("/IMPORTS")]),v._v(": 显示导入函数表"),e("br"),v._v(" "),e("code",[v._v("/LINENUMBERS")]),v._v(":显示行号信息"),e("br"),v._v(" "),e("code",[v._v("/RELOCATIONS")]),v._v(": 显示重定位信息"),e("br"),v._v(" "),e("code",[v._v("/SECTION:name")]),v._v(" :显示某个段"),e("br"),v._v(" "),e("code",[v._v("/SECTION")]),v._v(":显示文件概要信息"),e("br"),v._v(" "),e("code",[v._v("/SYMBOLS")]),v._v(": 显示文件符号表"),e("br"),v._v(" "),e("code",[v._v("/TLS")]),v._v(": 显示线程局部存储TLS信息")])]),v._v(" "),e("h2",{attrs:{id:"三、对比记忆两者命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、对比记忆两者命令"}},[v._v("#")]),v._v(" 三、对比记忆两者命令")]),v._v(" "),e("p",[v._v("Windows下是dumpbin（dump+bin)"),e("br"),v._v("\nlinux下是objdump（obj+dump)")]),v._v(" "),e("p",[v._v("可以联想到，"),e("br"),v._v("\n我先前在Windows下写自己的汇编代码用的"),e("code",[v._v("Notepad++")]),v._v("和"),e("code",[v._v("NASM")]),v._v(" "),e("code",[v._v("NASM")]),v._v("将"),e("code",[v._v("notepad++")]),v._v("写的代码"),e("code",[v._v(".asm")]),v._v("编译为"),e("code",[v._v(".bin")]),v._v("，所以，Windows下是bin"),e("br"),v._v("\nPS：其实NASM也可以在Linux下编译，但是Linux下我常用gcc进行")])])}],!1,null,null,null);_.default=s.exports}}]);