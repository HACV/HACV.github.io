<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>进程、线程杂谈 | HACV</title>
    <meta name="description" content="Personal Blog Website">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.8eb0d87d.css" as="style"><link rel="preload" href="/assets/js/app.373a1a4c.js" as="script"><link rel="preload" href="/assets/js/50.0d413cee.js" as="script"><link rel="prefetch" href="/assets/js/10.ebd9e5bb.js"><link rel="prefetch" href="/assets/js/100.a17ab085.js"><link rel="prefetch" href="/assets/js/101.ce709e86.js"><link rel="prefetch" href="/assets/js/102.ce6a96f7.js"><link rel="prefetch" href="/assets/js/103.6a096481.js"><link rel="prefetch" href="/assets/js/104.188a3345.js"><link rel="prefetch" href="/assets/js/105.f1849ebe.js"><link rel="prefetch" href="/assets/js/106.a7050667.js"><link rel="prefetch" href="/assets/js/107.0ef90bf1.js"><link rel="prefetch" href="/assets/js/108.94f4d0d2.js"><link rel="prefetch" href="/assets/js/109.92f1b684.js"><link rel="prefetch" href="/assets/js/11.8f5f6683.js"><link rel="prefetch" href="/assets/js/110.e1afc419.js"><link rel="prefetch" href="/assets/js/111.ec92886d.js"><link rel="prefetch" href="/assets/js/112.708b6410.js"><link rel="prefetch" href="/assets/js/113.36c7b141.js"><link rel="prefetch" href="/assets/js/114.60bf5424.js"><link rel="prefetch" href="/assets/js/115.b016c05b.js"><link rel="prefetch" href="/assets/js/116.19d3704f.js"><link rel="prefetch" href="/assets/js/117.1e70075a.js"><link rel="prefetch" href="/assets/js/118.0479fb97.js"><link rel="prefetch" href="/assets/js/119.a309ee1f.js"><link rel="prefetch" href="/assets/js/12.593ef9ae.js"><link rel="prefetch" href="/assets/js/120.e0d4e2e4.js"><link rel="prefetch" href="/assets/js/121.1f56742b.js"><link rel="prefetch" href="/assets/js/122.04f218a9.js"><link rel="prefetch" href="/assets/js/123.1b975e64.js"><link rel="prefetch" href="/assets/js/124.89fbc462.js"><link rel="prefetch" href="/assets/js/125.248be577.js"><link rel="prefetch" href="/assets/js/126.5ca03798.js"><link rel="prefetch" href="/assets/js/127.1e22e83e.js"><link rel="prefetch" href="/assets/js/128.1436609d.js"><link rel="prefetch" href="/assets/js/129.20bdc2ba.js"><link rel="prefetch" href="/assets/js/13.67a13924.js"><link rel="prefetch" href="/assets/js/130.a1df8a19.js"><link rel="prefetch" href="/assets/js/131.41b92c13.js"><link rel="prefetch" href="/assets/js/132.55535879.js"><link rel="prefetch" href="/assets/js/133.20ba13c7.js"><link rel="prefetch" href="/assets/js/134.4d5f4f94.js"><link rel="prefetch" href="/assets/js/135.20b0b603.js"><link rel="prefetch" href="/assets/js/136.99cc4ebf.js"><link rel="prefetch" href="/assets/js/137.3204c7e5.js"><link rel="prefetch" href="/assets/js/138.912d80d6.js"><link rel="prefetch" href="/assets/js/139.f6bca21c.js"><link rel="prefetch" href="/assets/js/14.b89e9981.js"><link rel="prefetch" href="/assets/js/140.ffc82a85.js"><link rel="prefetch" href="/assets/js/141.895c7359.js"><link rel="prefetch" href="/assets/js/142.2378879c.js"><link rel="prefetch" href="/assets/js/143.c7c5bea4.js"><link rel="prefetch" href="/assets/js/144.0206347f.js"><link rel="prefetch" href="/assets/js/145.e6cd79b8.js"><link rel="prefetch" href="/assets/js/146.286874a1.js"><link rel="prefetch" href="/assets/js/147.0251fceb.js"><link rel="prefetch" href="/assets/js/148.75ea14de.js"><link rel="prefetch" href="/assets/js/149.9ada5e93.js"><link rel="prefetch" href="/assets/js/15.8658dbcc.js"><link rel="prefetch" href="/assets/js/16.0c69adc6.js"><link rel="prefetch" href="/assets/js/17.a20e9f3e.js"><link rel="prefetch" href="/assets/js/18.bda70dd0.js"><link rel="prefetch" href="/assets/js/19.ada15e0a.js"><link rel="prefetch" href="/assets/js/2.858e80da.js"><link rel="prefetch" href="/assets/js/20.39ab60f2.js"><link rel="prefetch" href="/assets/js/21.3a6af5e1.js"><link rel="prefetch" href="/assets/js/22.aca118be.js"><link rel="prefetch" href="/assets/js/23.997c768f.js"><link rel="prefetch" href="/assets/js/24.2388b656.js"><link rel="prefetch" href="/assets/js/25.2e398a29.js"><link rel="prefetch" href="/assets/js/26.999e43d6.js"><link rel="prefetch" href="/assets/js/27.2be0cf10.js"><link rel="prefetch" href="/assets/js/28.b39e69d3.js"><link rel="prefetch" href="/assets/js/29.bc9dcf63.js"><link rel="prefetch" href="/assets/js/3.53ecd128.js"><link rel="prefetch" href="/assets/js/30.e43bc868.js"><link rel="prefetch" href="/assets/js/31.b8db3815.js"><link rel="prefetch" href="/assets/js/32.9c52ac0c.js"><link rel="prefetch" href="/assets/js/33.942c1377.js"><link rel="prefetch" href="/assets/js/34.ad488c6d.js"><link rel="prefetch" href="/assets/js/35.bde7fe50.js"><link rel="prefetch" href="/assets/js/36.dc87e012.js"><link rel="prefetch" href="/assets/js/37.9be237bc.js"><link rel="prefetch" href="/assets/js/38.a2ed656e.js"><link rel="prefetch" href="/assets/js/39.c6893003.js"><link rel="prefetch" href="/assets/js/4.7737ee66.js"><link rel="prefetch" href="/assets/js/40.ed6f077a.js"><link rel="prefetch" href="/assets/js/41.95871ed4.js"><link rel="prefetch" href="/assets/js/42.2252d8af.js"><link rel="prefetch" href="/assets/js/43.081ffb45.js"><link rel="prefetch" href="/assets/js/44.a6b3c3cf.js"><link rel="prefetch" href="/assets/js/45.a3ce1167.js"><link rel="prefetch" href="/assets/js/46.befd8516.js"><link rel="prefetch" href="/assets/js/47.f34f9cc4.js"><link rel="prefetch" href="/assets/js/48.62761611.js"><link rel="prefetch" href="/assets/js/49.5d8825e5.js"><link rel="prefetch" href="/assets/js/5.44a635f1.js"><link rel="prefetch" href="/assets/js/51.7c6d64d3.js"><link rel="prefetch" href="/assets/js/52.900f0e6d.js"><link rel="prefetch" href="/assets/js/53.ca23aed2.js"><link rel="prefetch" href="/assets/js/54.f172bf59.js"><link rel="prefetch" href="/assets/js/55.1b9517bc.js"><link rel="prefetch" href="/assets/js/56.80334add.js"><link rel="prefetch" href="/assets/js/57.7894c325.js"><link rel="prefetch" href="/assets/js/58.2c167e62.js"><link rel="prefetch" href="/assets/js/59.e54585ea.js"><link rel="prefetch" href="/assets/js/6.aad427eb.js"><link rel="prefetch" href="/assets/js/60.78afe802.js"><link rel="prefetch" href="/assets/js/61.d3de9a8d.js"><link rel="prefetch" href="/assets/js/62.2a9ca0f4.js"><link rel="prefetch" href="/assets/js/63.52ef0271.js"><link rel="prefetch" href="/assets/js/64.5dce8ce0.js"><link rel="prefetch" href="/assets/js/65.ffb04f2b.js"><link rel="prefetch" href="/assets/js/66.896cdc01.js"><link rel="prefetch" href="/assets/js/67.d6ca691a.js"><link rel="prefetch" href="/assets/js/68.18ac82fd.js"><link rel="prefetch" href="/assets/js/69.56cdd1c7.js"><link rel="prefetch" href="/assets/js/7.620fa364.js"><link rel="prefetch" href="/assets/js/70.51c8d23a.js"><link rel="prefetch" href="/assets/js/71.de32e86c.js"><link rel="prefetch" href="/assets/js/72.03a9f5e4.js"><link rel="prefetch" href="/assets/js/73.ca41987b.js"><link rel="prefetch" href="/assets/js/74.88d83cef.js"><link rel="prefetch" href="/assets/js/75.b3683b54.js"><link rel="prefetch" href="/assets/js/76.43d2e38b.js"><link rel="prefetch" href="/assets/js/77.f3af5f07.js"><link rel="prefetch" href="/assets/js/78.e3fc9b02.js"><link rel="prefetch" href="/assets/js/79.24cdce5c.js"><link rel="prefetch" href="/assets/js/8.2fb63ebd.js"><link rel="prefetch" href="/assets/js/80.2ad1db1b.js"><link rel="prefetch" href="/assets/js/81.f1725f8c.js"><link rel="prefetch" href="/assets/js/82.c920e30f.js"><link rel="prefetch" href="/assets/js/83.e76f0172.js"><link rel="prefetch" href="/assets/js/84.2c1fc3ff.js"><link rel="prefetch" href="/assets/js/85.e613049c.js"><link rel="prefetch" href="/assets/js/86.b67437ac.js"><link rel="prefetch" href="/assets/js/87.40536e04.js"><link rel="prefetch" href="/assets/js/88.43da89fb.js"><link rel="prefetch" href="/assets/js/89.31670b27.js"><link rel="prefetch" href="/assets/js/9.48d24621.js"><link rel="prefetch" href="/assets/js/90.356e80c4.js"><link rel="prefetch" href="/assets/js/91.efbe9da4.js"><link rel="prefetch" href="/assets/js/92.89a08c16.js"><link rel="prefetch" href="/assets/js/93.7bb24f82.js"><link rel="prefetch" href="/assets/js/94.6a11b890.js"><link rel="prefetch" href="/assets/js/95.5e6fe5c2.js"><link rel="prefetch" href="/assets/js/96.9a9179a7.js"><link rel="prefetch" href="/assets/js/97.622a7ef9.js"><link rel="prefetch" href="/assets/js/98.296286f0.js"><link rel="prefetch" href="/assets/js/99.69584608.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8eb0d87d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HACV</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link router-link-active">💻操作系统</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link">☁️网络</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">☕️软件工程</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">💾数据库</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">🐉计算机内功</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">🔧Tools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">⚛️C/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">🐾数据结构和算法</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link router-link-active">💻操作系统</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link">☁️网络</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">☕️软件工程</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">💾数据库</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">🐉计算机内功</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">🔧Tools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">⚛️C/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>进程、线程杂谈</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#一、进程和线程在两大操作系统的特点" class="sidebar-link">一、进程和线程在两大操作系统的特点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#二、线程安全" class="sidebar-link">二、线程安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#同步的各种锁：" class="sidebar-link">同步的各种锁：</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#三、线程池" class="sidebar-link">三、线程池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#_1）什么是线程池？" class="sidebar-link">1）什么是线程池？</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#_2）线程池的优点" class="sidebar-link">2）线程池的优点</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-06-11-The-concept-of-Process-and-Thread.html#_3）工作流程" class="sidebar-link">3）工作流程</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="进程和线程中的同步机制"><a href="#进程和线程中的同步机制" class="header-anchor">#</a> 进程和线程中的同步机制</h1> <p><b>进程</b>是<b>资源管理</b>的最小单位
<b>线程</b>是<b>程序执行</b>的最小单位。
记忆方法：
<font style="background:yellow;">大Boss（进程），只管拿着资源统筹兼顾。
小兵（线程），要卖力执行命令。</font></p> <h2 id="一、进程和线程在两大操作系统的特点"><a href="#一、进程和线程在两大操作系统的特点" class="header-anchor">#</a> 一、进程和线程在两大操作系统的特点</h2> <blockquote><ul><li>Windows对进程和线程的实现如同教科书一般标准。</li></ul> <blockquote><ul><li><font style="background:yellow;">Windows内核中有明确的<b>进程</b>和<b>线程</b>的概念</font></li></ul></blockquote> <ul><li>Linux内核中<b>并不存在真正意义上</b>的<b>线程</b>的概念</li></ul> <blockquote><ul><li>Linux将所有的执行实体（无论是进程还是线程）都称为<font style="background:yellow;"><b>任务（Task）</b></font></li> <li><b>每个Task概念上都类似于一个单线程的进程</b>，具有内存空间、执行实体、文件资源等。</li> <li>不过,<b>Linux下不同的任务之间可以选择共享内存空间</b>，因而在实际意义上，共享了同一个内存空间的多个任务构成了一个进程， 这些任务也就成了这个进程里的线程。</li></ul> <blockquote><ul><li>Linux下的线程本质上用进程实现;（题目）</li></ul></blockquote></blockquote></blockquote> <h2 id="二、线程安全"><a href="#二、线程安全" class="header-anchor">#</a> 二、线程安全</h2> <p><font color="red" size="5">（记得到时候加上代码）</font>
为了避免多个线程同时读写同一个数据而产生不可预料的后果,我们需要将各个线程对同一个数据的访问同步（Synchronization）。
所谓同步，既是指在一个线程访问数据未结束的时候，其他线程不得对同一个数据进行访问。</p> <p>同步的<b>最常见方法</b>是使用<b>锁（Lock）</b>（虽然，现在我也没看到目前哪本书上，还有除锁之外的，我还需要查询，后补充）。锁是一种非强制机制，每一个线程在访问数据或资源之前首先试图获取（Acquire）锁，并在访问结束之后释放(Release)锁。在锁已经被占用的时候试图获取锁时，线程会等待，直到锁重新可用。</p> <h3 id="同步的各种锁："><a href="#同步的各种锁：" class="header-anchor">#</a> 同步的各种锁：</h3> <blockquote><ul><li><font type="楷体" size="5" style="background:yellow;">（1）信号量</font></li></ul> <blockquote><ul><li><font style="background:yellow;"><b>（严格程度：低）二元信号量（Binary Semaphore）</b></font>是最简单的一种锁，它只有两种状态:占用与非占用。它适合只能被唯一个线程独占访问的资源。当二元信号量处于非占用状态时，第一个试图获取该二元信号量的线程会获得该锁，并将二元信号量置为占用状态，此后其他的所有试图获取该二元信号量的线程将会等待，直到该锁被释放。</li> <li>对于<b>允许多个线程并发访问</b>的资源，<b>多元信号量简称信号量(Semaphore)</b>,它是一个很好的选择。一个初始值为N的信号量允许N个线程并发访问。线程访问资源的时候首先获取信号量，进行如下操作:</li></ul> <blockquote><ul><li>将信号量的值减1。</li> <li>如果信号量的值小于0，则进入等待状态，否则继续执行。</li></ul></blockquote> <ul><li>访问完资源之后，线程释放信号量，进行如下操作:</li></ul> <blockquote><ul><li>将信号量的值加1。</li> <li>如果信号量的值小于1,唤醒-一个等待中的线程。</li></ul></blockquote></blockquote></blockquote> <blockquote><ul><li><font style="background:yellow;"><b>（严格程度：中）互斥量（Mutex）</b></font>和<b>二元信号量</b>很类似，资源仅同时允许一个线程访问，但和信号量不同的是:</li></ul> <blockquote><ul><li>1）<b>信号量</b>在整个系统可以被任意线程获取并释放，也就是说，同一个信号量可以被系统中的一个线程获取之后的<font style="background:yellow;">另一个线程</font>释放。</li> <li>2）<b>互斥量</b>则要求哪个线程获取了互斥量，哪个线程就要负责释放这个锁，其他线程越俎代庖去释放互斥量是无效的。</li></ul></blockquote></blockquote> <blockquote><ul><li><font style="background:yellow;"><b>（严格程度：高）临界区（Critical Section）</b></font>是比<b>互斥量</b>更加严格的同步手段。</li></ul> <blockquote><ul><li>在术语中，把临界区的锁的获取称为进入临界区,而把锁的程放称为离开临界区。</li> <li>临界区和互斥量与信号量的区别在于:</li></ul> <blockquote><ul><li>1）<b>互斥量和信号量</b>在系统的<font style="background:yellow;"><b>任何进程</b></font>里都是可见的，也就是说，一个进程创建了一个互斥量或信号量,另一个进程试图去获取该锁是合法的。</li> <li>2）<b>临界区</b>的作用范围<font style="background:yellow;"><b>仅限于本进程</b></font>，其他的进程无法获取该锁。除此之外，临界区具有和互斥量相同的性质。</li></ul></blockquote></blockquote></blockquote> <blockquote><ul><li><font type="楷体" size="5" style="background:yellow;">（2）</font><font style="background:yellow;"><b>读写锁（Read-Write Lock）</b></font></li></ul> <blockquote><ul><li>由来：对于一段数据，多个线程同时读取总是没有问题的，但假设操作都不是原子型，只要有任何一个线程试图对这个数据进行修改，就必须使用同步手段来避免出错。如果我们使用上述信号量、互斥量或临界区中的任何一种来进行同步，尽管可以保证程序正确，但<b>对于读取频繁，而仅仅偶尔写入的情况</b>，会显得非常低效。</li> <li>读写锁(Read-Write Lock)致力于一种更加特定的场合的同步:<b>读取频繁，偶尔写入的情况</b></li> <li>读写锁可以避免这个问题。对于同一个锁，读写锁有两种获取方式，<b>共享的(Shared)</b>或<b>独占(Exclusive)</b>。</li></ul> <blockquote><ul><li>当锁处于自由的状态时，试图以任何一种方式获取锁都能成功，并将锁置于对应的状态。</li> <li>如果锁处于共享状态，其他线程以共享的方式获取锁仍然会成功，此时这个锁分配给了多个线程。然而，如果其他线程试图以独身的方式获取已经处于共享状态的锁，那么它将必须等待锁被所有的线程释放。</li> <li>相应地，处于独占状态的锁将阻止任何其他线程获取该锁，不论它们试图以哪种方式获取。</li></ul></blockquote></blockquote></blockquote> <blockquote><ul><li><font type="楷体" size="5" style="background:yellow;">（3）</font><font style="background:yellow;"><b>条件变量（Condition Variable）</b></font> 作为一种同步手段，作用类似于一个栅栏。</li></ul> <blockquote><ul><li>对于条件变量，线程可以有两种操作，首先线程可以等待条件变量，一个条件变量可以被多个线程等待。</li> <li>其次，线程可以唤醒条件变量,此时某个或所有等待此条件变量的线程都会被唤醒并继续支持。也就是说，使用条件变量可以让许多线程-起等待某个事件的发生，当事件发生时(条件变量被唤醒)，所有的线程可以一起恢复执行。</li></ul></blockquote></blockquote> <h2 id="三、线程池"><a href="#三、线程池" class="header-anchor">#</a> 三、线程池</h2> <p>下文参考自：<a href="https://mp.weixin.qq.com/s?__biz=MzI1NTE3OTk4Nw==&mid=2653734974&idx=1&sn=987f9a4cfea1c830036ae20fc04866d5&chksm=f1e18582c6960c941a5e147c198d9cbc3f27e88dbb82fb62f0d23261821070bd43bdfd2fc2b2&mpshare=1&scene=23&srcid=0728Ab0PK8WsIZWsv1UoVm8L&sharer_sharetime=1595948760667&sharer_shareid=7d02bdfe8ee477ab2b773f2df63f3163#rd" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1）什么是线程池？"><a href="#_1）什么是线程池？" class="header-anchor">#</a> 1）什么是线程池？</h3> <p>实际开发中我们需要让程序执行某个特定任务时，就会开启一个线程，如果并发的线程数量太多，频繁地创建线程就会严重影响系统的运行效率。
如何解决上述为呢？有没有一种方式可以让线程得到复用？
也就是要求执行一次任务之后不被销毁，可以继续执行其他任务，这就跟“数据库连接池”的思路一样了，数据库连接池的实现逻辑是在缓冲池中预先放置一定数量的连接对象，然后进行复用，那么很显然，在缓冲池中<b>预先放置一定数量的线程对象</b>以实现复用的机制就叫做线程池。</p> <h3 id="_2）线程池的优点"><a href="#_2）线程池的优点" class="header-anchor">#</a> 2）线程池的优点</h3> <p>1、使用线程池可以减少创建和销毁线程的次数，每个工作线程都可以重复使用。
2、可以根据系统的承受能力，调整线程池中工作线程的数量，防止因为消耗过多内存导致服务器崩溃。</p> <h3 id="_3）工作流程"><a href="#_3）工作流程" class="header-anchor">#</a> 3）工作流程</h3> <p>1、提交一个任务时，线程池会创建一个新的线程执行任务，直到当前线程数等于<code>corePoolSize</code>。
2、如果当前线程数为<code>corePoolSize</code>，继续提交的任务被保存到任务队列中，等待被执行。
3、如果<strong>任务队列满了</strong>，那就创建新的线程执行当前任务，直到线程池中的线程数达到 <code>maxPoolSize</code>，这时再有任务来，只能执行<code>reject()</code>拒绝处理该任务。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.373a1a4c.js" defer></script><script src="/assets/js/50.0d413cee.js" defer></script>
  </body>
</html>
