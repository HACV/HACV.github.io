<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ч║┐чиЛхРМцне | HACV</title>
    <meta name="description" content="Personal Blog Website">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.8eb0d87d.css" as="style"><link rel="preload" href="/assets/js/app.497fe22e.js" as="script"><link rel="preload" href="/assets/js/56.80334add.js" as="script"><link rel="prefetch" href="/assets/js/10.8bbeb718.js"><link rel="prefetch" href="/assets/js/100.c8c3bdc6.js"><link rel="prefetch" href="/assets/js/101.ce709e86.js"><link rel="prefetch" href="/assets/js/102.ce6a96f7.js"><link rel="prefetch" href="/assets/js/103.45c0d5d4.js"><link rel="prefetch" href="/assets/js/104.d9c8a8aa.js"><link rel="prefetch" href="/assets/js/105.babe72af.js"><link rel="prefetch" href="/assets/js/106.3c8bbdca.js"><link rel="prefetch" href="/assets/js/107.379fa1b3.js"><link rel="prefetch" href="/assets/js/108.9e628bbe.js"><link rel="prefetch" href="/assets/js/109.63dee7a8.js"><link rel="prefetch" href="/assets/js/11.390e9c09.js"><link rel="prefetch" href="/assets/js/110.d23fbe19.js"><link rel="prefetch" href="/assets/js/111.49bcd42e.js"><link rel="prefetch" href="/assets/js/112.183c5666.js"><link rel="prefetch" href="/assets/js/113.94007f67.js"><link rel="prefetch" href="/assets/js/114.f003379f.js"><link rel="prefetch" href="/assets/js/115.77f2a310.js"><link rel="prefetch" href="/assets/js/116.5f92f419.js"><link rel="prefetch" href="/assets/js/117.8e672558.js"><link rel="prefetch" href="/assets/js/118.7de461b3.js"><link rel="prefetch" href="/assets/js/119.d27bb626.js"><link rel="prefetch" href="/assets/js/12.47752e11.js"><link rel="prefetch" href="/assets/js/120.555e109f.js"><link rel="prefetch" href="/assets/js/121.2e9db0cc.js"><link rel="prefetch" href="/assets/js/122.590af312.js"><link rel="prefetch" href="/assets/js/123.7b8a9255.js"><link rel="prefetch" href="/assets/js/124.2dafcbcd.js"><link rel="prefetch" href="/assets/js/125.6c5d7b69.js"><link rel="prefetch" href="/assets/js/126.35dd6f5b.js"><link rel="prefetch" href="/assets/js/127.275de61f.js"><link rel="prefetch" href="/assets/js/128.d995dc93.js"><link rel="prefetch" href="/assets/js/129.defed3ff.js"><link rel="prefetch" href="/assets/js/13.9ab56618.js"><link rel="prefetch" href="/assets/js/130.9d05b141.js"><link rel="prefetch" href="/assets/js/131.48d03a37.js"><link rel="prefetch" href="/assets/js/132.d205cdc0.js"><link rel="prefetch" href="/assets/js/133.56a46473.js"><link rel="prefetch" href="/assets/js/134.cc62c37c.js"><link rel="prefetch" href="/assets/js/135.f2411992.js"><link rel="prefetch" href="/assets/js/136.12c83bc0.js"><link rel="prefetch" href="/assets/js/137.d36e1641.js"><link rel="prefetch" href="/assets/js/138.e3505c81.js"><link rel="prefetch" href="/assets/js/139.5dc6900e.js"><link rel="prefetch" href="/assets/js/14.62a5eff5.js"><link rel="prefetch" href="/assets/js/140.4a2e0dec.js"><link rel="prefetch" href="/assets/js/141.08cd0900.js"><link rel="prefetch" href="/assets/js/142.e15348eb.js"><link rel="prefetch" href="/assets/js/143.2b958062.js"><link rel="prefetch" href="/assets/js/144.e3919269.js"><link rel="prefetch" href="/assets/js/145.6acb3cba.js"><link rel="prefetch" href="/assets/js/146.a44bc999.js"><link rel="prefetch" href="/assets/js/147.006c244d.js"><link rel="prefetch" href="/assets/js/148.0ceaf017.js"><link rel="prefetch" href="/assets/js/149.eb7fe757.js"><link rel="prefetch" href="/assets/js/15.7d2d48ae.js"><link rel="prefetch" href="/assets/js/150.6bd6bd49.js"><link rel="prefetch" href="/assets/js/151.5b65f44b.js"><link rel="prefetch" href="/assets/js/152.4e584419.js"><link rel="prefetch" href="/assets/js/16.8786bc8f.js"><link rel="prefetch" href="/assets/js/17.5312e725.js"><link rel="prefetch" href="/assets/js/18.0627885a.js"><link rel="prefetch" href="/assets/js/19.110980f3.js"><link rel="prefetch" href="/assets/js/2.858e80da.js"><link rel="prefetch" href="/assets/js/20.fada5d94.js"><link rel="prefetch" href="/assets/js/21.fef9831b.js"><link rel="prefetch" href="/assets/js/22.312e3a38.js"><link rel="prefetch" href="/assets/js/23.33f46c53.js"><link rel="prefetch" href="/assets/js/24.00a66de9.js"><link rel="prefetch" href="/assets/js/25.2f188985.js"><link rel="prefetch" href="/assets/js/26.68654ac5.js"><link rel="prefetch" href="/assets/js/27.6cab9932.js"><link rel="prefetch" href="/assets/js/28.754b96e8.js"><link rel="prefetch" href="/assets/js/29.d1ed41d5.js"><link rel="prefetch" href="/assets/js/3.53ecd128.js"><link rel="prefetch" href="/assets/js/30.056a1a2e.js"><link rel="prefetch" href="/assets/js/31.274d0f03.js"><link rel="prefetch" href="/assets/js/32.d1ec2cf6.js"><link rel="prefetch" href="/assets/js/33.80d80fee.js"><link rel="prefetch" href="/assets/js/34.e1287e62.js"><link rel="prefetch" href="/assets/js/35.047e41da.js"><link rel="prefetch" href="/assets/js/36.dc87e012.js"><link rel="prefetch" href="/assets/js/37.9be237bc.js"><link rel="prefetch" href="/assets/js/38.a2ed656e.js"><link rel="prefetch" href="/assets/js/39.c6893003.js"><link rel="prefetch" href="/assets/js/4.ba718c7b.js"><link rel="prefetch" href="/assets/js/40.7fc8dd0c.js"><link rel="prefetch" href="/assets/js/41.95871ed4.js"><link rel="prefetch" href="/assets/js/42.2252d8af.js"><link rel="prefetch" href="/assets/js/43.081ffb45.js"><link rel="prefetch" href="/assets/js/44.a6b3c3cf.js"><link rel="prefetch" href="/assets/js/45.a3ce1167.js"><link rel="prefetch" href="/assets/js/46.befd8516.js"><link rel="prefetch" href="/assets/js/47.d0e55fa3.js"><link rel="prefetch" href="/assets/js/48.170cc5e4.js"><link rel="prefetch" href="/assets/js/49.dd11397f.js"><link rel="prefetch" href="/assets/js/5.4ebbb385.js"><link rel="prefetch" href="/assets/js/50.37023d3b.js"><link rel="prefetch" href="/assets/js/51.2abe7a3f.js"><link rel="prefetch" href="/assets/js/52.9860b2ac.js"><link rel="prefetch" href="/assets/js/53.ca23aed2.js"><link rel="prefetch" href="/assets/js/54.f172bf59.js"><link rel="prefetch" href="/assets/js/55.1b9517bc.js"><link rel="prefetch" href="/assets/js/57.0c5040c8.js"><link rel="prefetch" href="/assets/js/58.800fcd7b.js"><link rel="prefetch" href="/assets/js/59.5c9ae199.js"><link rel="prefetch" href="/assets/js/6.0bff5906.js"><link rel="prefetch" href="/assets/js/60.244e06d7.js"><link rel="prefetch" href="/assets/js/61.4989f930.js"><link rel="prefetch" href="/assets/js/62.0467583d.js"><link rel="prefetch" href="/assets/js/63.aea99875.js"><link rel="prefetch" href="/assets/js/64.1c08761a.js"><link rel="prefetch" href="/assets/js/65.93b72363.js"><link rel="prefetch" href="/assets/js/66.b57e2bb9.js"><link rel="prefetch" href="/assets/js/67.d6ca691a.js"><link rel="prefetch" href="/assets/js/68.18ac82fd.js"><link rel="prefetch" href="/assets/js/69.56cdd1c7.js"><link rel="prefetch" href="/assets/js/7.38fc841b.js"><link rel="prefetch" href="/assets/js/70.51c8d23a.js"><link rel="prefetch" href="/assets/js/71.de32e86c.js"><link rel="prefetch" href="/assets/js/72.03a9f5e4.js"><link rel="prefetch" href="/assets/js/73.e30bca5a.js"><link rel="prefetch" href="/assets/js/74.daa81746.js"><link rel="prefetch" href="/assets/js/75.b3683b54.js"><link rel="prefetch" href="/assets/js/76.43d2e38b.js"><link rel="prefetch" href="/assets/js/77.f3af5f07.js"><link rel="prefetch" href="/assets/js/78.8340d104.js"><link rel="prefetch" href="/assets/js/79.24cdce5c.js"><link rel="prefetch" href="/assets/js/8.f1e98a93.js"><link rel="prefetch" href="/assets/js/80.2ad1db1b.js"><link rel="prefetch" href="/assets/js/81.f1725f8c.js"><link rel="prefetch" href="/assets/js/82.c920e30f.js"><link rel="prefetch" href="/assets/js/83.e76f0172.js"><link rel="prefetch" href="/assets/js/84.eeb2593a.js"><link rel="prefetch" href="/assets/js/85.e613049c.js"><link rel="prefetch" href="/assets/js/86.b67437ac.js"><link rel="prefetch" href="/assets/js/87.40536e04.js"><link rel="prefetch" href="/assets/js/88.43da89fb.js"><link rel="prefetch" href="/assets/js/89.31670b27.js"><link rel="prefetch" href="/assets/js/9.76534e6a.js"><link rel="prefetch" href="/assets/js/90.356e80c4.js"><link rel="prefetch" href="/assets/js/91.efbe9da4.js"><link rel="prefetch" href="/assets/js/92.89a08c16.js"><link rel="prefetch" href="/assets/js/93.7bb24f82.js"><link rel="prefetch" href="/assets/js/94.6a11b890.js"><link rel="prefetch" href="/assets/js/95.5e6fe5c2.js"><link rel="prefetch" href="/assets/js/96.9a9179a7.js"><link rel="prefetch" href="/assets/js/97.622a7ef9.js"><link rel="prefetch" href="/assets/js/98.296286f0.js"><link rel="prefetch" href="/assets/js/99.caab6c7d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8eb0d87d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HACV</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">ЁЯР╛цХ░цНоч╗УцЮДхТМчоЧц│Х</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link router-link-active">ЁЯТ╗цУНф╜Ьч│╗ч╗Я</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link">тШБя╕Пч╜Сч╗Ь</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">тШХя╕Пш╜пф╗╢х╖ечиЛ</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">ЁЯТ╛цХ░цНох║У</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">ЁЯРЙшобчоЧцЬ║хЖЕхКЯ</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">ЁЯФзTools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">тЪЫя╕ПC/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/02.DataStructureAndAlgorithm/" class="nav-link">ЁЯР╛цХ░цНоч╗УцЮДхТМчоЧц│Х</a></div><div class="nav-item"><a href="/03.OS/" class="nav-link router-link-active">ЁЯТ╗цУНф╜Ьч│╗ч╗Я</a></div><div class="nav-item"><a href="/04.Net/" class="nav-link">тШБя╕Пч╜Сч╗Ь</a></div><div class="nav-item"><a href="/05.SE/" class="nav-link">тШХя╕Пш╜пф╗╢х╖ечиЛ</a></div><div class="nav-item"><a href="/06.SQL/" class="nav-link">ЁЯТ╛цХ░цНох║У</a></div><div class="nav-item"><a href="/07.InternalSkill/" class="nav-link">ЁЯРЙшобчоЧцЬ║хЖЕхКЯ</a></div><div class="nav-item"><a href="/08.Tools/" class="nav-link">ЁЯФзTools</a></div><div class="nav-item"><a href="/09.Language/" class="nav-link">тЪЫя╕ПC/C++</a></div><div class="nav-item"><a href="https://github.com/HACV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>ч║┐чиЛхРМцне</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#cover-falsepassword" class="sidebar-link">cover: false
password:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хЖЕхо╣" class="sidebar-link">хЖЕхо╣</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ш┐ЫчиЛщЧ┤хРМцнечЪДхЗачзНцЦ╣ц│Х" class="sidebar-link">ш┐ЫчиЛщЧ┤хРМцнечЪДхЗачзНцЦ╣ц│Х</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хУ▓хнжхо╢хРГщенщЧощвШя╝Ъ" class="sidebar-link">хУ▓хнжхо╢хРГщенщЧощвШя╝Ъ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф╕АуАБхРМцнечЪДцжВх┐╡" class="sidebar-link">ф╕АуАБхРМцнечЪДцжВх┐╡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф║МуАБф║ТцЦещЗПmutexя╝Иф║ТцЦещФБя╝Й" class="sidebar-link">ф║МуАБф║ТцЦещЗПmutexя╝Иф║ТцЦещФБя╝Й</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_1я╝Йpthread-mutex-initхЗ╜цХ░" class="sidebar-link">1я╝ЙpthreadmutexinitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_2я╝Йpthread-mutex-destroyхЗ╜цХ░" class="sidebar-link">2я╝ЙpthreadmutexdestroyхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_3я╝Йpthread-mutex-lockхЗ╜цХ░" class="sidebar-link">3я╝ЙpthreadmutexlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_4я╝Йpthread-mutex-trylockхЗ╜цХ░" class="sidebar-link">4я╝ЙpthreadmutextrylockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_5я╝Йpthread-mutex-unlockхЗ╜цХ░" class="sidebar-link">5я╝ЙpthreadmutexunlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф╗еф╕КцЙАцЬЙхЗ╜цХ░я╝МшжБчФичЪДцХ░цНоч▒╗хЮЛ" class="sidebar-link">ф╗еф╕КцЙАцЬЙхЗ╜цХ░я╝МшжБчФичЪДцХ░цНоч▒╗хЮЛ</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хЕИч╜оч╗Ушо║-цн╗щФБ" class="sidebar-link">хЕИч╜оч╗Ушо║+цн╗щФБ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф╕ЙуАБшп╗хЖЩщФБ" class="sidebar-link">ф╕ЙуАБшп╗хЖЩщФБ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#шп╗хЖЩщФБчК╢цАБя╝Ъ" class="sidebar-link">шп╗хЖЩщФБчК╢цАБя╝Ъ</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#шп╗хЖЩщФБчЙ╣цАзя╝Ъ" class="sidebar-link">шп╗хЖЩщФБчЙ╣цАзя╝Ъ</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_1я╝Йpthread-rwlock-initхЗ╜цХ░" class="sidebar-link">1я╝ЙpthreadrwlockinitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_2я╝Йpthread-rwlock-destroyхЗ╜цХ░" class="sidebar-link">2я╝ЙpthreadrwlockdestroyхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_3я╝Йpthread-rwlock-rdlockхЗ╜цХ░" class="sidebar-link">3я╝ЙpthreadrwlockrdlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_4я╝Йpthread-rwlock-wrlockхЗ╜цХ░" class="sidebar-link">4я╝ЙpthreadrwlockwrlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_5я╝Йpthread-rwlock-tryrdlockхЗ╜цХ░" class="sidebar-link">5я╝ЙpthreadrwlocktryrdlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_6я╝Йpthread-rwlock-trywrlockхЗ╜цХ░" class="sidebar-link">6я╝ЙpthreadrwlocktrywrlockхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_7я╝Йpthread-rwlock-unlockхЗ╜цХ░" class="sidebar-link">7я╝ЙpthreadrwlockunlockхЗ╜цХ░</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хЫЫуАБцЭбф╗╢хПШщЗПя╝ИцЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бя╝Й" class="sidebar-link">хЫЫуАБцЭбф╗╢хПШщЗПя╝ИцЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бя╝Й</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_1я╝Йpthread-cond-initхЗ╜цХ░" class="sidebar-link">1я╝ЙpthreadcondinitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_2я╝Йpthread-cond-destroyхЗ╜цХ░" class="sidebar-link">2я╝ЙpthreadconddestroyхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_3я╝Йpthread-cond-waitхЗ╜цХ░я╝ИщЪ╛чВ╣я╝Й" class="sidebar-link">3я╝ЙpthreadcondwaitхЗ╜цХ░я╝ИщЪ╛чВ╣я╝Й</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_4я╝Йpthread-cond-timedwaitхЗ╜цХ░" class="sidebar-link">4я╝ЙpthreadcondtimedwaitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_5я╝Йpthread-cond-signalхЗ╜цХ░" class="sidebar-link">5я╝ЙpthreadcondsignalхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_6я╝Йpthread-cond-broadcastхЗ╜цХ░" class="sidebar-link">6я╝ЙpthreadcondbroadcastхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ч║┐чиЛхРМцнетАФтАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭцЭбф╗╢хПШщЗПцибхЮЛ" class="sidebar-link">ч║┐чиЛхРМцнетАФтАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭцЭбф╗╢хПШщЗПцибхЮЛ</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#цА╗ч╗У" class="sidebar-link">цА╗ч╗У</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#цЭбф╗╢хПШщЗПчЪДф╝ШчВ╣я╝Ъя╝Иф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝Яя╝Й" class="sidebar-link">цЭбф╗╢хПШщЗПчЪДф╝ШчВ╣я╝Ъя╝Иф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝Яя╝Й</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф║ФуАБф┐бхП╖щЗП" class="sidebar-link">ф║ФуАБф┐бхП╖щЗП</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_1я╝Йsem-initхЗ╜цХ░" class="sidebar-link">1я╝Йsem_initхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_2я╝Йsem-destroyхЗ╜цХ░" class="sidebar-link">2я╝Йsem_destroyхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_3я╝Йsem-waitхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОхКащФБя╝Мшбичд║-я╝Й" class="sidebar-link">3я╝Йsem_waitхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОхКащФБя╝Мшбичд║--я╝Й</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_4я╝Йsem-trywaitхЗ╜цХ░" class="sidebar-link">4я╝Йsem_trywaitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_5я╝Йsem-timedwaitхЗ╜цХ░" class="sidebar-link">5я╝Йsem_timedwaitхЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_6я╝Йsem-postхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОшзгщФБя╝Мшбичд║-я╝Й" class="sidebar-link">6я╝Йsem_postхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОшзгщФБя╝Мшбичд║++я╝Й</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#тАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭ-ф┐бхП╖щЗПя╝Иц│ицДПя╝МцпФш╛ГцЭбф╗╢хПШщЗПф╕ЛчЪДцибхЮЛя╝Й" class="sidebar-link">тАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭ-ф┐бхП╖щЗПя╝Иц│ицДПя╝МцпФш╛ГцЭбф╗╢хПШщЗПф╕ЛчЪДцибхЮЛя╝Й</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хЕнуАБш┐ЫчиЛщЧ┤хРМцне" class="sidebar-link">хЕнуАБш┐ЫчиЛщЧ┤хРМцне</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#ф║ТцЦещЗП" class="sidebar-link">ф║ТцЦещЗП</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#цЦЗф╗╢щФБя╝ИхАЯхКйfcntlхЗ╜цХ░цЭехоЮчО░щФБцЬ║хИ╢я╝Й" class="sidebar-link">цЦЗф╗╢щФБя╝ИхАЯхКйfcntlхЗ╜цХ░цЭехоЮчО░щФБцЬ║хИ╢я╝Й</a></li></ul></li><li><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#хУ▓хнжхо╢чФищдРцибхЮЛ" class="sidebar-link">хУ▓хнжхо╢чФищдРцибхЮЛ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_1я╝ЙхдЪч║┐чиЛчЙИ" class="sidebar-link">1я╝ЙхдЪч║┐чиЛчЙИ</a></li><li class="sidebar-sub-header"><a href="/03.OS/OSBasic/2020-07-22-Linux-System-Multithreading.html#_2я╝ЙхдЪш┐ЫчиЛчЙИ" class="sidebar-link">2я╝ЙхдЪш┐ЫчиЛчЙИ</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><hr> <p>title:  Linuxч│╗ч╗ЯтАФтАФч║┐чиЛхРМцне+ш┐ЫчиЛхРМцне
date: 2020-07-22 09:00:00
categories:</p> <ul><li>цУНф╜Ьч│╗ч╗Я
tags:</li> <li>Linux</li></ul> <p>img: /photos/2020.6.03_15/2020_06_01_cover.jpg
top: false
summary: linuxф╕ЛщФБцЬ║хИ╢
mathjax: true</p> <h2 id="cover-falsepassword"><a href="#cover-falsepassword" class="header-anchor">#</a> cover: false
password:</h2> <h1 id="ч║┐чиЛхРМцне"><a href="#ч║┐чиЛхРМцне" class="header-anchor">#</a> ч║┐чиЛхРМцне</h1> <p>ф╕╗цОзч║┐чиЛ
хнРч║┐чиЛ</p> <h3 id="хЖЕхо╣"><a href="#хЖЕхо╣" class="header-anchor">#</a> хЖЕхо╣</h3> <p>ф╕╗шжБхЖЕхо╣я╝Мч║┐чиЛхРМцнеуАВ</p> <p>======
цЬмчлашо▓хИ░чЪДхТМ<strong>ч║┐чиЛ</strong>чЫ╕хЕ│чЪДщФБцЬЙ4чзНуАВ
1я╝Йф║ТцЦещЗП(ф║ТцЦещФБ)
2я╝Йшп╗хЖЩщФБ
3я╝ЙцЭбф╗╢хПШщЗПя╝Ич║┐чиЛх╜Уф╕нф╕АчзНх╕╕шзБчЪДщФБцЬ║хИ╢я╝Й
4я╝Йф┐бхП╖щЗПя╝Ъф║ТцЦещЗПхНЗч║зчЙИ
х░▒цШпф╕КщЭвш┐Щ4чзН</p> <blockquote><ul><li>хРМцнецжВх┐╡я╝Ъя╝ИхМ║хИЖя╝МчФЯц┤╗хТМч╝ЦчиЛф╕нчЪДхРМцнечЪДхМ║хИля╝Й
хРМцне
ч║┐чиЛхРМцне</li></ul></blockquote> <blockquote><ul><li>1я╝Йф║ТцЦещЗП(ф║ТцЦещФБ):
ф╕Ач│╗хИЧхЗ╜цХ░я╝ЪщГ╜цШпф╗еpthread_mutexх╝Ахд┤,щЗНчВ╣я╝МхжВф╜Хх║ФчФиш┐Щф║ЫхЗ╜цХ░хп╣ф╕Аф╕кхПШщЗПш┐ЫшбМхКащФБшо┐щЧоуАВ
pthread_mutex_init
_destroy
_lock
_unlock</li></ul></blockquote> <blockquote><ul><li>2)шп╗хЖЩщФБя╝Ъ
ф╕Ач│╗хИЧхЗ╜цХ░щГ╜цШпф╗еpthread_rwlock_х╝Ахд┤чЪД
pthread_rwlock_</li></ul></blockquote> <blockquote><ul><li>3)цЭбф╗╢хПШщЗПя╝Ъ
ф╕Ач│╗хИЧхЗ╜цХ░ф╕║pthread_cond_х╝Ахд┤чЪД
pthread_cond_xxxx
pthread_cond_wait();хЗ╜цХ░я╝Иш┐ЩцШпф╕Аф╕кхнжф╣аш┐ЩщГихИЖчЪДщЗНчВ╣я╝МшАМф╕Фш┐Щф╕кхЗ╜цХ░ф╣ЯцШпцЭбф╗╢хПШщЗПчЪДщЪ╛чВ╣я╝Й
ч╗Эхп╣цЧ╢щЧ┤я╝Ъ   1970/1/1  00:00:00  --- unix шобцЧ╢хЕГх╣┤уАВ
time_t cur = time(NULL);
strcut timespec t;
t.tv_sec = cur + 10;
pthread_cond_timedwait(&amp;cond, &amp;mutex, &amp;t);</li></ul></blockquote> <blockquote><ul><li>4)ф┐бхП╖щЗПя╝ЪцШпф║ТцЦещЗПхНЗч║зчЙИ
ф╕Ач│╗хИЧхЗ╜цХ░ф╕║sem_х╝Ахд┤чЪД
хПСчО░я╝Мх░Сф║ЖщВгф╕кpthreadхЕ│щФохнЧя╝МцЙАф╗ешп┤я╝Мф┐бхП╖щЗПф╕НхНХхНХшГ╜чФиф║Оч║┐чиЛщЧ┤хРМцнея╝Мш┐ШшГ╜чФиф║Ош┐ЫчиЛщЧ┤хРМцнея╝Б
sem_</li></ul></blockquote> <h2 id="ш┐ЫчиЛщЧ┤хРМцнечЪДхЗачзНцЦ╣ц│Х"><a href="#ш┐ЫчиЛщЧ┤хРМцнечЪДхЗачзНцЦ╣ц│Х" class="header-anchor">#</a> ш┐ЫчиЛщЧ┤хРМцнечЪДхЗачзНцЦ╣ц│Х</h2> <p>1я╝Йф┐бхП╖щЗПя╝ИSemaphoreя╝Й
ф╕Ач│╗хИЧхЗ╜цХ░ф╕║sem_х╝Ахд┤чЪД
2я╝ЙцЦЗф╗╢щФБ
3я╝Йф║ТцЦещЗПхТМф┐бхП╖щЗПшБФхРИчЪДф╕АчзНцЦ╣х╝П</p> <h2 id="хУ▓хнжхо╢хРГщенщЧощвШя╝Ъ"><a href="#хУ▓хнжхо╢хРГщенщЧощвШя╝Ъ" class="header-anchor">#</a> хУ▓хнжхо╢хРГщенщЧощвШя╝Ъ</h2> <p>1я╝Йч║┐чиЛчЙИцЬм
2я╝Йш┐ЫчиЛчЙИцЬм</p> <h2 id="ф╕АуАБхРМцнечЪДцжВх┐╡"><a href="#ф╕АуАБхРМцнечЪДцжВх┐╡" class="header-anchor">#</a> ф╕АуАБхРМцнечЪДцжВх┐╡</h2> <p>цЙАш░УхРМцнея╝МхН│хРМцЧ╢ш╡╖цнея╝МхНПш░Гф╕АшЗ┤уАВф╕НхРМчЪДхп╣ш▒бя╝Мхп╣тАЬхРМцнетАЭчЪДчРЖшзгцЦ╣х╝ПчХецЬЙф╕НхРМуАВ
хжВя╝М<strong>чбмф╗╢</strong>ф╕КчЪДшо╛хдЗя╝Мшо╛хдЗхРМцнея╝МцШпцМЗхЬиф╕дф╕кшо╛хдЗф╣ЛщЧ┤шзДхоЪф╕Аф╕кхЕ▒хРМчЪДцЧ╢щЧ┤хПВшАГя╝Ы
<strong>цХ░цНох║УхРМцне</strong>я╝МцШпцМЗшойф╕дф╕кцИЦхдЪф╕кцХ░цНох║УхЖЕхо╣ф┐ЭцМБф╕АшЗ┤я╝МцИЦшАЕцМЙщЬАшжБщГихИЖф┐ЭцМБф╕АшЗ┤я╝Ы
<strong>цЦЗф╗╢хРМцне</strong>я╝МцШпцМЗшойф╕дф╕кцИЦхдЪф╕кцЦЗф╗╢хд╣щЗМчЪДцЦЗф╗╢ф┐ЭцМБф╕АшЗ┤уАВчнЙчнЙ.</p> <blockquote><ul><li>шАМя╝М<strong>ч╝ЦчиЛф╕нуАБщАЪф┐бф╕н</strong>цЙАшп┤чЪДхРМцнеф╕ОчФЯц┤╗ф╕нхдзхо╢хН░ш▒бф╕нчЪДхРМцнецжВх┐╡чХецЬЙх╖ох╝ВуАВ
тАЬхРМтАЭхнЧх║ФцШпцМЗ<strong>хНПхРМуАБхНПхКйуАБф║ТчЫ╕щЕНхРИ</strong>уАВ
ф╕╗цЧихЬихНПхРМцнеш░Гя╝МцМЙщвДхоЪчЪДхЕИхРОцмбх║Пш┐РшбМуАВ</li></ul></blockquote> <p>хРДф╕кшбМф╕Ъя╝Мхп╣хРМцнечЪДчРЖшзгцЦ╣х╝ПцШпф╕Нф╕Аца╖чЪДя╝Бя╝Бя╝Б</p> <p>ч║┐чиЛхРМцнея╝МхоШцЦ╣шп┤ц│Х
ч║┐чиЛхРМцнея╝МцМЗф╕Аф╕кч║┐чиЛхПСхЗ║цЯРф╕АхКЯшГ╜ш░ГчФицЧ╢я╝МхЬиц▓бцЬЙх╛ЧхИ░ч╗УцЮЬф╣ЛхЙНя╝Мшпеш░ГчФиф╕Нш┐ФхЫЮуАВхРМцЧ╢хЕ╢хоГч║┐чиЛф╕║<strong>ф┐ЭшпБцХ░цНоф╕АшЗ┤цАз</strong>я╝Мф╕НшГ╜ш░ГчФишпехКЯшГ╜уАВ</p> <p>ф╕НхРМчЪДхп╣ш▒бя╝Мхп╣хРМф╕Аф╕кцХ░цНохРМцЧ╢ш┐ЫшбМцУНф╜Ья╝Мш┐Щф╕кцХ░цНоя╝МцИСф╗мчз░ф╕║хЕ▒ф║лцХ░цНоцИЦшАЕхПлхЕ▒ф║лш╡Дц║РуАВ</p> <p>ц│ицДПя╝Ъ
a,b,cщГ╜цШпф╕Аф╕кш┐ЫчиЛф╕нчЪДч║┐чиЛ
хБЗшо╛aхТМbщГ╜цЛ┐щФБхО╗шо┐щЧоя╝МшАМcф╕НцЛ┐щФБх░▒хО╗чЫ┤цОешо┐щЧо
шГ╜ф╕НшГ╜цИРхКЯя╝Яя╝Я
хПпф╗ечЪДя╝МхЫаф╕║ф╗Цф╗мщГ╜хЕ▒ф║лщВгф╕кхПШщЗП
я╝Иф╜ЖцШпш┐Щца╖ф╝Ъхп╝шЗ┤хЗ║чО░щФЩшппя╝Й
ш┐ЩцККщФБф╕НхЕ╖цЬЙх╝║хИ╢цАзя╝Бя╝Бя╝Б</p> <p>хЬиLinuxя╝МчФицИ╖х▒ВщЭвф╕Кч╝ЦчиЛцЙАчФихИ░чЪДцЙАцЬЙчЪДщФБя╝МцИСф╗мщГ╜цККф╗Цчз░ф╣Лф╕║<strong>х╗║шоощФБ</strong>уАВ
цЙАф╗еш┐Щф╕кя╝МцМЗчЪДцШпLinuxхЖЕца╕х╗║шооф╜ахЬишо┐щЧохЕ▒ф║лцХ░цНочЪДцЧ╢хАЩя╝МхКаф╕АцККщФБхЖНшо┐щЧоуАВцШпхРжхЕ╖цЬЙх╝║хИ╢цАзя╝Яя╝Я
ф╕НхЕ╖цЬЙя╝Бя╝Бя╝Б
<font size="5" style="background:yellow;">хЫацндшо┐щЧохЕ▒ф║лцХ░цНочЪДцЙАцЬЙч║┐чиЛя╝МшжБцГ│ф┐ЭшпБцХ░цНоф╕НхЗ║чО░ц╖╖ф╣▒уАВ
щГ╜х║ФшпехЕИхКащФБхРОшо┐щЧоцЙНшбМя╝Бя╝Бя╝Б</font></p> <p>хжВцЮЬхГПхЙНщЭвщВгца╖чЪДя╝МчЫ┤цОешо┐щЧоя╝Мф╝Ъхп╝шЗ┤цХ░цНох░┤х░мчЪДуАВ</p> <p>цППш┐░чЪДщФБя╝МхжВф╜ХхЬих║ФчФичиЛх║Пф╕ншбичд║хЗ║цЭехСвя╝Ях░▒щЬАшжБф╕Аф╕кхПШщЗПшбичд║хЗ║цЭеуАВш┐Щф╕кхПШщЗПхПлхБЪф║ТцЦещЗПя╝ИцИЦшАЕф║ТцЦещФБя╝Й</p> <h2 id="ф║МуАБф║ТцЦещЗПmutexя╝Иф║ТцЦещФБя╝Й"><a href="#ф║МуАБф║ТцЦещЗПmutexя╝Иф║ТцЦещФБя╝Й" class="header-anchor">#</a> ф║МуАБф║ТцЦещЗПmutexя╝Иф║ТцЦещФБя╝Й</h2> <p>Linuxф╕нцПРф╛Ыф╕АцККф║ТцЦещФБmutexя╝Иф╣Ячз░ф╣Лф╕║ф║ТцЦещЗПя╝ЙуАВ
цпПф╕кч║┐чиЛхЬихп╣ш╡Дц║РцУНф╜ЬхЙНщГ╜х░ЭшпХхЕИхКащФБя╝МцИРхКЯхКащФБцЙНшГ╜цУНф╜Ья╝МцУНф╜Ьч╗УцЭЯшзгщФБуАВ
ш╡Дц║Рш┐ШцШпхЕ▒ф║лчЪДя╝Мч║┐чиЛщЧ┤ф╣Яш┐ШцШпчлЮф║ЙчЪДя╝М
ф╜ЖщАЪш┐ЗтАЬщФБтАЭх░▒х░Жш╡Дц║РчЪДшо┐щЧохПШцИР<strong>ф║ТцЦе</strong>цУНф╜Ья╝МшАМхРОф╕ОцЧ╢щЧ┤цЬЙхЕ│чЪДщФЩшппф╣Яф╕Нф╝ЪхЖНф║зчФЯф║ЖуАВ</p> <p>ф╕╗шжБх║ФчФихЗ╜цХ░я╝Ъ</p> <h3 id="_1я╝Йpthread-mutex-initхЗ╜цХ░"><a href="#_1я╝Йpthread-mutex-initхЗ╜цХ░" class="header-anchor">#</a> 1я╝Йpthread_mutex_initхЗ╜цХ░</h3> <p>х░Жф║ТцЦещЗПхИЭхзЛхМЦ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>restrict mutex<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token class-name">pthread_mutexattr_t</span> <span class="token operator">*</span>restrict attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ц│ицДПхИ░ф╕КщЭвцЬЙф╕кхЕ│щФохнЧя╝Ъ
<font size="5" style="background:yellow;"><strong>restrictхЕ│щФохнЧ</strong></font>я╝ЪхПкчФиф║ОщЩРхИ╢цМЗщТИя╝МхСКшпЙч╝ЦшпСхЩия╝МцЙАцЬЙф┐оцФ╣шпецМЗщТИцМЗхРСхЖЕхнШф╕нхЖЕхо╣чЪДцУНф╜Ья╝М<strong>хПкшГ╜щАЪш┐ЗцЬмцМЗщТИхоМцИР</strong>уАВф╕НшГ╜щАЪш┐ЗщЩдцЬмцМЗщТИф╗ехдЦчЪДхЕ╢ф╗ЦхПШщЗПцИЦцМЗщТИф┐оцФ╣</p> <h3 id="_2я╝Йpthread-mutex-destroyхЗ╜цХ░"><a href="#_2я╝Йpthread-mutex-destroyхЗ╜цХ░" class="header-anchor">#</a> 2я╝Йpthread_mutex_destroyхЗ╜цХ░</h3> <p>ф║ТцЦещЗПщФАцпБ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>	<span class="token keyword">int</span> <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3я╝Йpthread-mutex-lockхЗ╜цХ░"><a href="#_3я╝Йpthread-mutex-lockхЗ╜цХ░" class="header-anchor">#</a> 3я╝Йpthread_mutex_lockхЗ╜цХ░</h3> <p>ф║ТцЦещЗПхКащФБ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4я╝Йpthread-mutex-trylockхЗ╜цХ░"><a href="#_4я╝Йpthread-mutex-trylockхЗ╜цХ░" class="header-anchor">#</a> 4я╝Йpthread_mutex_trylockхЗ╜цХ░</h3> <p>ш┐Щф╕кцШпя╝Мх░ЭшпХхКащФБя╝МхжВцЮЬцИРхКЯхИЩщФБф╕Кя╝МхРжхИЩчЫ┤цОеш┐ФхЫЮя╝Иф╕Нф╝ЪщШ╗хбЮчнЙх╛Ея╝Й
ш┐ФхЫЮчЪДш┐Щф║Ыя╝МцИСхПпф╗ех╣▓хЕ╢ф╗Цф║ЛцГЕя╝МцИСхПпф╗еш┐Зф╕кхЗачзТхЖНцЭеф╕АцмбхКащФБ
цШ╛чД╢я╝МшжБцГ│чФиш┐Щф╕кя╝МцИСф╗мщЬАшжБя╝Мш╜ошпвя╝ИхСицЬЯцАзчЪДх░ЭшпХхКащФБя╝Й</p> <p>шАМф║ТцЦещЗПхКащФБя╝МхН┤шжБщШ╗хбЮчнЙх╛Е</p> <h3 id="_5я╝Йpthread-mutex-unlockхЗ╜цХ░"><a href="#_5я╝Йpthread-mutex-unlockхЗ╜цХ░" class="header-anchor">#</a> 5я╝Йpthread_mutex_unlockхЗ╜цХ░</h3> <p>ф║ТцЦещЗПшзгщФБ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ф╗еф╕К5ф╕кхЗ╜цХ░чЪДш┐ФхЫЮхА╝щГ╜цШпя╝ЪцИРхКЯш┐ФхЫЮ0я╝М хд▒ш┤еш┐ФхЫЮщФЩшппхП╖уАВ</p> <h3 id="ф╗еф╕КцЙАцЬЙхЗ╜цХ░я╝МшжБчФичЪДцХ░цНоч▒╗хЮЛ"><a href="#ф╗еф╕КцЙАцЬЙхЗ╜цХ░я╝МшжБчФичЪДцХ░цНоч▒╗хЮЛ" class="header-anchor">#</a> ф╗еф╕КцЙАцЬЙхЗ╜цХ░я╝МшжБчФичЪДцХ░цНоч▒╗хЮЛ</h3> <p><code>pthread_mutex_t</code> ч▒╗хЮЛя╝МхЕ╢цЬмш┤ицШпф╕Аф╕кч╗УцЮДф╜УуАВ
ф╕║чоАхМЦчРЖшзгя╝Мх║ФчФицЧ╢хПпх┐╜чХехЕ╢хоЮчО░ч╗ЖшКВя╝МчоАхНХх╜УцИРцХ┤цХ░чЬЛх╛ЕуАВ
хПпф╗ечоАхНХчЬЛх╛Ея╝МхИЭхзЛхМЦхоМцИРхРОя╝МхПЦхА╝ф╕║1я╝МхКащФБцИРхКЯя╝МхА╝чФ▒1--хПШцИР0
шзгщФБцИРхКЯя╝Мш┐Щф╕кхА╝чФ▒0++хПШцИР1
я╝Иф╕дчзНхПЦхА╝я╝Й</p> <p>pthread_mutex_t mutex;
хПШщЗПmutexхПкцЬЙф╕дчзНхПЦхА╝1уАБ0уАВ</p> <h2 id="хЕИч╜оч╗Ушо║-цн╗щФБ"><a href="#хЕИч╜оч╗Ушо║-цн╗щФБ" class="header-anchor">#</a> хЕИч╜оч╗Ушо║+цн╗щФБ</h2> <p>хЬишо┐щЧохЕ▒ф║лш╡Дц║РхЙНхКащФБя╝Мшо┐щЧоч╗УцЭЯхРО<strong>члЛхН│шзгщФБ</strong>уАВ<strong>щФБчЪДтАЬч▓Тх║жтАЭх║Фш╢Кх░Пш╢Кхе╜</strong>уАВ</p> <p>цн╗щФБя╝Ъ
цИСф╗мчЪДч║┐чиЛхЬиф╜┐чФиф║ТцЦещЗПя╝МцИЦшАЕхЕ╢ф╗ЦхРМцнецЬ║хИ╢ш┐ЗчиЛх╜Уф╕ня╝МхЗ║чО░чЪДф╕АчзНчО░ш▒буАВшАМф╕НцШпщФБчЪДф╕АчзНцЬ║хИ╢уАВ
я╝ИцИСшо░х╛Чя╝МцИСхнжчЪДцУНф╜Ьч│╗ч╗Яф╕ня╝Мч║┐чиЛхТМш┐ЫчиЛщГ╜цЬЙцн╗щФБчО░ш▒бцККуАВуАВя╝Й</p> <p>цпФхжВф╕ЛщЭвф╕дчзНцн╗щФБ</p> <ol><li>ч║┐чиЛшпХхЫ╛хп╣хРМф╕Аф╕кф║ТцЦещЗПAхКащФБф╕дцмбуАВя╝ИшзгхЖ│цЦ╣цбИя╝ЪхКащФБхоМя╝МчлЛхН│шзгщФБя╝Й</li> <li>ч║┐чиЛ1цЛецЬЙAщФБя╝Мшп╖ц▒ВшО╖х╛ЧBщФБя╝Ыч║┐чиЛ2цЛецЬЙBщФБя╝Мшп╖ц▒ВшО╖х╛ЧAщФБя╝ИшзгхЖ│цЦ╣цбИя╝Ъtrylockх░ЭшпХхКащФБя╝Мх░▒ф╕Нф╝ЪщШ╗хбЮф║Жя╝Йя╝Их╜Уф╕НшГ╜шО╖хПЦцЙАцЬЙчЪДщФБчЪДцЧ╢хАЩя╝МцФ╛х╝Гх╖▓ч╗ПхНацЬЙчЪДцЙАцЬЙчЪДщФБя╝Й</li></ol> <h2 id="ф╕ЙуАБшп╗хЖЩщФБ"><a href="#ф╕ЙуАБшп╗хЖЩщФБ" class="header-anchor">#</a> ф╕ЙуАБшп╗хЖЩщФБ</h2> <p>шп╗хЖЩщФБя╝ИчЫ╕ш╛Гф║Оф║ТцЦещФБцЭешп┤я╝МцАзшГ╜чиНх╛ощлШф╕Аф║Ыя╝Й</p> <p><font size="5" style="background:yellow;">ц│ицДПя╝Ъшп╗хЖЩщФБя╝МщФБхПкцЬЙф╕АцККя╝Мф╕НцШпф╕дцКК</font>
ф╕Оф║ТцЦещЗПч▒╗ф╝╝я╝Мф╜Жшп╗хЖЩщФБхЕБшо╕<strong>цЫ┤щлШчЪДх╣╢шбМцАз</strong>уАВ
хЕ╢чЙ╣цАзф╕║я╝ЪхЖЩчЛмхНая╝Мшп╗хЕ▒ф║л</p> <p>ш┐ЩцККщФБя╝МцЧвхПпф╗ечФитАЬшп╗тАЭчЪДцЦ╣х╝Пхп╣хПШщЗПхКащФБя╝МшАМф╕Фш┐ШшГ╜ф╗етАЬхЖЩтАЭчЪДцЦ╣х╝Пхп╣хПШщЗПхКащФБ</p> <h3 id="шп╗хЖЩщФБчК╢цАБя╝Ъ"><a href="#шп╗хЖЩщФБчК╢цАБя╝Ъ" class="header-anchor">#</a> шп╗хЖЩщФБчК╢цАБя╝Ъ</h3> <p>ф╕АцККшп╗хЖЩщФБхЕ╖хдЗф╕ЙчзНчК╢цАБя╝Ъ</p> <ol><li>шп╗цибх╝Пф╕ЛхКащФБчК╢цАБ (шп╗щФБ)</li> <li>хЖЩцибх╝Пф╕ЛхКащФБчК╢цАБ (хЖЩщФБ)</li> <li>ф╕НхКащФБчК╢цАБ</li></ol> <p>цОМцПбшп╗хЖЩщФБя╝Мшо░ф╜Пф╕ЛщЭвх░▒хе╜ф║Жя╝Ъ
хЖЩщФБф╝ШхЕИч║зщлШя╝МхЖЩчЛмхНауАБшп╗хЕ▒ф║л</p> <h3 id="шп╗хЖЩщФБчЙ╣цАзя╝Ъ"><a href="#шп╗хЖЩщФБчЙ╣цАзя╝Ъ" class="header-anchor">#</a> шп╗хЖЩщФБчЙ╣цАзя╝Ъ</h3> <p>1.шп╗хЖЩщФБцШптАЬхЖЩцибх╝ПхКащФБтАЭцЧ╢я╝М шзгщФБхЙНя╝МцЙАцЬЙхп╣шпещФБхКащФБчЪДч║┐чиЛщГ╜ф╝ЪшвлщШ╗хбЮуАВ
2.шп╗хЖЩщФБцШптАЬшп╗цибх╝ПхКащФБтАЭцЧ╢я╝М хжВцЮЬч║┐чиЛф╗ешп╗цибх╝Пхп╣хЕ╢хКащФБф╝ЪцИРхКЯя╝ЫхжВцЮЬч║┐чиЛф╗ехЖЩцибх╝ПхКащФБф╝ЪщШ╗хбЮуАВ
3.шп╗хЖЩщФБцШптАЬшп╗цибх╝ПхКащФБтАЭцЧ╢я╝М цЧвцЬЙшпХхЫ╛ф╗ехЖЩцибх╝ПхКащФБчЪДч║┐чиЛя╝Мф╣ЯцЬЙшпХхЫ╛ф╗ешп╗цибх╝ПхКащФБчЪДч║┐чиЛуАВщВгф╣Ишп╗хЖЩщФБф╝ЪщШ╗хбЮщЪПхРОчЪДшп╗цибх╝ПщФБшп╖ц▒ВуАВф╝ШхЕИц╗бш╢│хЖЩцибх╝ПщФБуАВшп╗щФБуАБхЖЩщФБх╣╢шбМщШ╗хбЮя╝М<strong>хЖЩщФБф╝ШхЕИч║зщлШ</strong></p> <p><font size="5" style="background:yellow;">шп╗хЖЩщФБф╣ЯхПл<strong>хЕ▒ф║л-чЛмхНащФБ</strong>уАВ</font>
х╜Ушп╗хЖЩщФБф╗ешп╗цибх╝ПщФБф╜ПцЧ╢я╝МхоГцШпф╗ехЕ▒ф║лцибх╝ПщФБф╜ПчЪДя╝Ых╜УхоГф╗ехЖЩцибх╝ПщФБф╜ПцЧ╢я╝МхоГцШпф╗ечЛмхНацибх╝ПщФБф╜ПчЪДуАВ<strong>хЖЩчЛмхНауАБшп╗хЕ▒ф║луАВ</strong>
шп╗хЖЩщФБщЭЮх╕╕щАВхРИф║Охп╣цХ░цНоч╗УцЮДшп╗чЪДцмбцХ░ш┐Ьхдзф║ОхЖЩчЪДцГЕхЖ╡уАВ</p> <h3 id="_1я╝Йpthread-rwlock-initхЗ╜цХ░"><a href="#_1я╝Йpthread-rwlock-initхЗ╜цХ░" class="header-anchor">#</a> 1я╝Йpthread_rwlock_initхЗ╜цХ░</h3> <p>хИЭхзЛхМЦф╕АцККшп╗хЖЩщФБ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>	<span class="token keyword">int</span> <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token class-name">pthread_rwlock_t</span> <span class="token operator">*</span>restrict rwlock<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token class-name">pthread_rwlockattr_t</span> <span class="token operator">*</span>restrict attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>хПВ2я╝Ъattrшбишп╗хЖЩщФБх▒ЮцАзя╝МщАЪх╕╕ф╜┐чФищ╗Шшодх▒ЮцАзя╝Мф╝аNULLхН│хПпуАВ</p> <h3 id="_2я╝Йpthread-rwlock-destroyхЗ╜цХ░"><a href="#_2я╝Йpthread-rwlock-destroyхЗ╜цХ░" class="header-anchor">#</a> 2я╝Йpthread_rwlock_destroyхЗ╜цХ░</h3> <h3 id="_3я╝Йpthread-rwlock-rdlockхЗ╜цХ░"><a href="#_3я╝Йpthread-rwlock-rdlockхЗ╜цХ░" class="header-anchor">#</a> 3я╝Йpthread_rwlock_rdlockхЗ╜цХ░</h3> <h3 id="_4я╝Йpthread-rwlock-wrlockхЗ╜цХ░"><a href="#_4я╝Йpthread-rwlock-wrlockхЗ╜цХ░" class="header-anchor">#</a> 4я╝Йpthread_rwlock_wrlockхЗ╜цХ░</h3> <h3 id="_5я╝Йpthread-rwlock-tryrdlockхЗ╜цХ░"><a href="#_5я╝Йpthread-rwlock-tryrdlockхЗ╜цХ░" class="header-anchor">#</a> 5я╝Йpthread_rwlock_tryrdlockхЗ╜цХ░</h3> <h3 id="_6я╝Йpthread-rwlock-trywrlockхЗ╜цХ░"><a href="#_6я╝Йpthread-rwlock-trywrlockхЗ╜цХ░" class="header-anchor">#</a> 6я╝Йpthread_rwlock_trywrlockхЗ╜цХ░</h3> <h3 id="_7я╝Йpthread-rwlock-unlockхЗ╜цХ░"><a href="#_7я╝Йpthread-rwlock-unlockхЗ╜цХ░" class="header-anchor">#</a> 7я╝Йpthread_rwlock_unlockхЗ╜цХ░</h3> <p>ф╗еф╕К7 ф╕кхЗ╜цХ░чЪДш┐ФхЫЮхА╝щГ╜цШпя╝ЪцИРхКЯш┐ФхЫЮ0я╝М хд▒ш┤ечЫ┤цОеш┐ФхЫЮщФЩшппхП╖уАВ</p> <p>pthread_rwlock_tч▒╗хЮЛ	чФиф║ОхоЪф╣Йф╕Аф╕кшп╗хЖЩщФБхПШщЗПуАВ
pthread_rwlock_t rwlock;</p> <p>чЬЛхжВф╕Лчд║ф╛Ля╝МхРМцЧ╢цЬЙхдЪф╕кч║┐чиЛхп╣хРМф╕АхЕих▒АцХ░цНошп╗уАБхЖЩцУНф╜ЬуАВ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span>

<span class="token keyword">int</span> counter<span class="token punctuation">;</span>
<span class="token class-name">pthread_rwlock_t</span> rwlock<span class="token punctuation">;</span>

<span class="token comment">/* 3ф╕кч║┐чиЛф╕НхоЪцЧ╢хЖЩхРМф╕АхЕих▒Аш╡Дц║Ря╝М5ф╕кч║┐чиЛф╕НхоЪцЧ╢шп╗хРМф╕АхЕих▒Аш╡Дц║Р */</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">th_write</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> t<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>arg<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pthread_rwlock_wrlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t <span class="token operator">=</span> counter<span class="token punctuation">;</span>
        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=======write %d: %lu: counter=%d ++counter=%d\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token operator">++</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">th_read</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>arg<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pthread_rwlock_rdlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------------read %d: %lu: %d\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">pthread_self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pthread_rwlock_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token class-name">pthread_t</span> tid<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">pthread_rwlock_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> th_write<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>tid<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> th_read<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token function">pthread_join</span><span class="token punctuation">(</span>tid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">pthread_rwlock_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rwlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h2 id="хЫЫуАБцЭбф╗╢хПШщЗПя╝ИцЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бя╝Й"><a href="#хЫЫуАБцЭбф╗╢хПШщЗПя╝ИцЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бя╝Й" class="header-anchor">#</a> хЫЫуАБцЭбф╗╢хПШщЗПя╝ИцЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бя╝Й</h2> <p>цЭбф╗╢хПШщЗПя╝Ъя╝Иф╕АхоЪшжБц╗бш╢│цЯРф╕кцЭбф╗╢я╝МцЙНшГ╜хТЛхТЛхТЛца╖я╝Й
цЭбф╗╢хПШщЗПцЬмш║лф╕НцШпщФБя╝Бф╜ЖхоГф╣ЯхПпф╗ещАацИРч║┐чиЛщШ╗хбЮуАВ
<strong>щАЪх╕╕ф╕Оф║ТцЦещФБщЕНхРИф╜┐чФи</strong>уАВч╗ЩхдЪч║┐чиЛцПРф╛Ыф╕Аф╕кф╝ЪхРИчЪДхЬ║цЙАуАВ</p> <p>ф╝ЪхРИчЪДхЬ║цЙАя╝ЪцМЗчЪДхЕ▒ф║лцХ░цНо</p> <p>ф╕╗шжБх║ФчФихЗ╜цХ░я╝Ъ</p> <h3 id="_1я╝Йpthread-cond-initхЗ╜цХ░"><a href="#_1я╝Йpthread-cond-initхЗ╜цХ░" class="header-anchor">#</a> 1я╝Йpthread_cond_initхЗ╜цХ░</h3> <h3 id="_2я╝Йpthread-cond-destroyхЗ╜цХ░"><a href="#_2я╝Йpthread-cond-destroyхЗ╜цХ░" class="header-anchor">#</a> 2я╝Йpthread_cond_destroyхЗ╜цХ░</h3> <h3 id="_3я╝Йpthread-cond-waitхЗ╜цХ░я╝ИщЪ╛чВ╣я╝Й"><a href="#_3я╝Йpthread-cond-waitхЗ╜цХ░я╝ИщЪ╛чВ╣я╝Й" class="header-anchor">#</a> 3я╝Йpthread_cond_waitхЗ╜цХ░я╝ИщЪ╛чВ╣я╝Й</h3> <p>хоГхПпф╗ех╣▓3ф╗╢ф║ЛцГЕ
щШ╗хбЮчнЙх╛Еф╕Аф╕кцЭбф╗╢хПШщЗП</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token class-name">pthread_cond_t</span> <span class="token operator">*</span>restrict cond<span class="token punctuation">,</span> <span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>restrict mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>хЗ╜цХ░ф╜ЬчФия╝Ъ
1.щШ╗хбЮчнЙх╛ЕцЭбф╗╢хПШщЗПcondя╝ИхПВ1я╝Йц╗бш╢│
2.щЗКцФ╛х╖▓цОМцПбчЪДф║ТцЦещФБя╝ИшзгщФБф║ТцЦещЗПя╝ЙчЫ╕х╜Уф║Оpthread_mutex_unlock(&amp;mutex);
** 1.2.ф╕дцнеф╕║ф╕Аф╕кхОЯхнРцУНф╜ЬуАВ**
3.<strong>х╜УшвлхФдщЖТ</strong>я╝Мpthread_cond_waitхЗ╜цХ░ш┐ФхЫЮцЧ╢я╝МшзгщЩдщШ╗хбЮх╣╢щЗНцЦ░чФ│шп╖шО╖хПЦф║ТцЦещФБpthread_mutex_lock(&amp;mutex);</p> <p>ш░БцЭехФдщЖТя╝Яя╝Я
<code>pthread_cond_signal</code>хЗ╜цХ░
хФдщЖТшЗ│х░Сф╕Аф╕кщШ╗хбЮхЬицЭбф╗╢хПШщЗПф╕КчЪДч║┐чиЛ</p> <p><code>pthread_cond_broadcast</code>хЗ╜цХ░я╝Иbroadcastя╝Мх╣┐цТня╝МшобчоЧцЬ║ч╜Сч╗Ья╝Мч╜Сч╗Ьч╝ЦчиЛф╕нф╣Яшо▓ш┐Щф╕кя╝Й
хФдщЖТхЕищГищШ╗хбЮхЬицЭбф╗╢хПШщЗПф╕КчЪДч║┐чиЛ</p> <h3 id="_4я╝Йpthread-cond-timedwaitхЗ╜цХ░"><a href="#_4я╝Йpthread-cond-timedwaitхЗ╜цХ░" class="header-anchor">#</a> 4я╝Йpthread_cond_timedwaitхЗ╜цХ░</h3> <h3 id="_5я╝Йpthread-cond-signalхЗ╜цХ░"><a href="#_5я╝Йpthread-cond-signalхЗ╜цХ░" class="header-anchor">#</a> 5я╝Йpthread_cond_signalхЗ╜цХ░</h3> <h3 id="_6я╝Йpthread-cond-broadcastхЗ╜цХ░"><a href="#_6я╝Йpthread-cond-broadcastхЗ╜цХ░" class="header-anchor">#</a> 6я╝Йpthread_cond_broadcastхЗ╜цХ░</h3> <p>ф╗еф╕К6 ф╕кхЗ╜цХ░чЪДш┐ФхЫЮхА╝щГ╜цШпя╝ЪцИРхКЯш┐ФхЫЮ0я╝М хд▒ш┤ечЫ┤цОеш┐ФхЫЮщФЩшппхП╖уАВ</p> <p>pthread_cond_tч▒╗хЮЛ	чФиф║ОхоЪф╣ЙцЭбф╗╢хПШщЗП
pthread_cond_t cond;</p> <p>х║ФчФихЬ║цЩпхСвя╝Яя╝Я</p> <h3 id="ч║┐чиЛхРМцнетАФтАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭцЭбф╗╢хПШщЗПцибхЮЛ"><a href="#ч║┐чиЛхРМцнетАФтАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭцЭбф╗╢хПШщЗПцибхЮЛ" class="header-anchor">#</a> ч║┐чиЛхРМцнетАФтАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭцЭбф╗╢хПШщЗПцибхЮЛ</h3> <p>ч║┐чиЛхРМцнеф╕нцЬАцЬАчЯехРНчЪДф╕Аф╕кцибхЮЛуАВ
хПкшжБцПРхИ░я╝МхЗаф╣ОщГ╜ф╝ЪцПРхИ░ш┐Щф╕кцибхЮЛуАВ</p> <blockquote><ul><li>хБЗхоЪцЬЙф╕дф╕кч║┐чиЛя╝Мф╕Аф╕кцибцЛЯчФЯф║зшАЕшбМф╕║я╝Мф╕Аф╕кцибцЛЯц╢Иш┤╣шАЕшбМф╕║уАВ
ф╕дф╕кч║┐чиЛхРМцЧ╢цУНф╜Ьф╕Аф╕кхЕ▒ф║лш╡Дц║Ря╝Иф╕АшИмчз░ф╣Лф╕║<strong>ц▒ЗшБЪ</strong>я╝Йя╝МчФЯф║зхРСхЕ╢ф╕нц╖╗хКаф║зхУБя╝Мц╢Иш┤╣шАЕф╗Оф╕нц╢Иш┤╣цОЙф║зхУБуАВ</li></ul></blockquote> <p>цШ╛чД╢я╝Мш┐Щф╕кчЪДцЭбф╗╢хПШщЗПх░▒цШпя╝Ъх╖▓ч╗ПчФЯф║зф║Жф║зхУБ</p> <p>чЬЛхжВф╕Лчд║ф╛Ля╝Мф╜┐чФицЭбф╗╢хПШщЗПцибцЛЯчФЯф║зшАЕуАБц╢Иш┤╣шАЕщЧощвШя╝Ъ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">msg</span> <span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">msg</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">msg</span> <span class="token operator">*</span>head<span class="token punctuation">;</span>

<span class="token class-name">pthread_cond_t</span> has_product <span class="token operator">=</span> PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span>
<span class="token class-name">pthread_mutex_t</span> lock <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">consumer</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>p<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">msg</span> <span class="token operator">*</span>mp<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token comment">//хд┤цМЗщТИф╕║чй║,шп┤цШОц▓бцЬЙшКВчВ╣    хПпф╗еф╕║ifхРЧ</span>
            <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>has_product<span class="token punctuation">,</span> <span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        mp <span class="token operator">=</span> head<span class="token punctuation">;</span>      
        head <span class="token operator">=</span> mp<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    			<span class="token comment">//цибцЛЯц╢Иш┤╣цОЙф╕Аф╕кф║зхУБ</span>
        <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;-Consume ---%d\n&quot;</span><span class="token punctuation">,</span> mp<span class="token operator">-&gt;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">free</span><span class="token punctuation">(</span>mp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">producer</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>p<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">msg</span> <span class="token operator">*</span>mp<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mp <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">msg</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token operator">-&gt;</span>num <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">//цибцЛЯчФЯф║зф╕Аф╕кф║зхУБ</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;-Produce ---%d\n&quot;</span><span class="token punctuation">,</span> mp<span class="token operator">-&gt;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token operator">-&gt;</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>
        head <span class="token operator">=</span> mp<span class="token punctuation">;</span>
        <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>has_product<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//х░ЖчнЙх╛ЕхЬишпецЭбф╗╢хПШщЗПф╕КчЪДф╕Аф╕кч║┐чиЛхФдщЖТ</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">pthread_t</span> pid<span class="token punctuation">,</span> cid<span class="token punctuation">;</span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>pid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> producer<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> consumer<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">pthread_join</span><span class="token punctuation">(</span>pid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pthread_join</span><span class="token punctuation">(</span>cid<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h2 id="цА╗ч╗У"><a href="#цА╗ч╗У" class="header-anchor">#</a> цА╗ч╗У</h2> <p>ф║ТцЦещЗПхЬиф╜┐чФичЪДцЧ╢хАЩя╝МшжБц│ицДПцККцПбф╕Аф╕Ля╝МщФБчЪД**тАЭч▓Тх║жтАЬ**я╝ИцИЦшАЕхПлхБЪщФБчЪДтАЬф╕┤чХМхМ║тАЭя╝Й
х╗║шооя╝МщФБчЪДч▓Тх║жя╝Иф╕┤чХМхМ║я╝Йш╢Кх░Пш╢Кхе╜уАВ
<font size="5" style="background:yellow;">цндхдДхТМ<code>уАКчиЛх║ПхСШчЪДшЗкцИСф┐охЕ╗-щУ╛цОея╝МшгЕш╜╜ф╕Ох║УуАЛ</code>шп┤чЪДф╕┤чХМхМ║хТЛф╕Нф╕Аца╖уАВуАВ</font></p> <p>шп╗хЖЩщФБф╜┐чФичЪДхЬ║цЩпя╝Ъ
хжВцЮЬхп╣цХ░цНошп╗чЪДцмбцХ░ш┐Ьш┐Ьхдзф║ОхЖЩчЪДцЧ╢хАЩ
ф╜ЖцШпя╝МхжВцЮЬцЙАцЬЙцУНф╜ЬщГ╜цШпхЖЩчЪДшпЭуАВ
чФитАЬшп╗хЖЩщФБтАЭхТМтАЬф║ТцЦещЗПтАЭц▓бцЬЙхМ║хИлуАВ
ф╜ЖцШпя╝МхжВцЮЬя╝Мшп╗цпФхЖЩхдЪя╝МцШ╛чД╢шп╗хЖЩщФБцЫ┤хе╜уАВ</p> <h2 id="цЭбф╗╢хПШщЗПчЪДф╝ШчВ╣я╝Ъя╝Иф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝Яя╝Й"><a href="#цЭбф╗╢хПШщЗПчЪДф╝ШчВ╣я╝Ъя╝Иф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝Яя╝Й" class="header-anchor">#</a> цЭбф╗╢хПШщЗПчЪДф╝ШчВ╣я╝Ъя╝Иф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝Яя╝Й</h2> <p><font size="3" style="background:yellow;">ф╕║ф╗Аф╣ИцИСф╗мшжБх╝ХхЕеш┐Щф╣ИхдЪчзНщФБчЪДцЬ║хИ╢я╝Яя╝ЯцЬАх╝АхзЛчЪДф║ТцЦещФБя╝Мф╕НцШпх╖▓ч╗ПхПпф╗ехоМцИРф┐ЭцКдцХ░цНочЪДчЫочЪДф║ЖхРЧя╝Яф╕║ф╗Аф╣Иш┐ШшжБх╝ХхЕешп╗хЖЩщФБхСвя╝ЯхЫаф╕║хЬишп╗цпФхЖЩцЫ┤хдЪчЪДхЬ║цЩпя╝Мшп╗хЖЩщФБчЪДцХИчОЗцпФф║ТцЦещФБщлШуАВщВгхПИф╕║ф╗Аф╣ИшжБх╝ХхЕецЭбф╗╢хПШщЗПхСвя╝Я<strong>хЫаф╕║цЭбф╗╢хПШщЗПчЫ╕хп╣ф║ОцИСф╗мчЪДф║ТцЦещЗПшАМшиАя╝МхоГф╣ЯхПпф╗ехЗПх░Сф╕Аф║Ыф╕Нх┐ЕшжБчЪДчлЮф║ЙхХК</strong>
хОЯхЫахжВф╕Ля╝Ъ
чЫ╕ш╛Гф║ОmutexшАМшиАя╝МцЭбф╗╢хПШщЗПхПпф╗ехЗПх░СчлЮф║ЙуАВ</font></p> <p>хжВчЫ┤цОеф╜┐чФиmutexя╝МщЩдф║ЖчФЯф║зшАЕуАБц╢Иш┤╣шАЕф╣ЛщЧ┤шжБчлЮф║Йф║ТцЦещЗПф╗ехдЦя╝Мц╢Иш┤╣шАЕф╣ЛщЧ┤ф╣ЯщЬАшжБчлЮф║Йф║ТцЦещЗПя╝Мф╜Ж<strong>хжВцЮЬц▒ЗшБЪя╝ИщУ╛шбия╝Йф╕нц▓бцЬЙцХ░цНоя╝Мц╢Иш┤╣шАЕф╣ЛщЧ┤члЮф║Йф║ТцЦещФБцШпцЧацДПф╣ЙчЪД</strong>уАВцЬЙф║ЖцЭбф╗╢хПШщЗПцЬ║хИ╢ф╗ехРОя╝МхПкцЬЙчФЯф║зшАЕхоМцИРчФЯф║зя╝МцЙНф╝Ъх╝Хш╡╖ц╢Иш┤╣шАЕф╣ЛщЧ┤чЪДчлЮф║ЙуАВцПРщлШф║ЖчиЛх║ПцХИчОЗуАВ</p> <h2 id="ф║ФуАБф┐бхП╖щЗП"><a href="#ф║ФуАБф┐бхП╖щЗП" class="header-anchor">#</a> ф║ФуАБф┐бхП╖щЗП</h2> <p>ц│ицДПя╝Мф┐бхП╖хТМф┐бхП╖щЗПц▓бцЬЙхЕ│ч│╗уАВх░▒хГПjavaхТМJavaScriptц▓бхЕ│ч│╗ф╕Аца╖уАВ</p> <p><font style="background:yellow;">ф┐бхП╖щЗПчЪДхИЭхА╝я╝МхЖ│хоЪф║ЖхНачФиф┐бхП╖щЗПчЪДч║┐чиЛчЪДф╕кцХ░уАВ</font></p> <p>ф┐бхП╖щЗПхп╣ф║О<strong>ч║┐чиЛхРМцне</strong>цЭешп┤я╝МхПпф╗ецККхоГчРЖшзгцИРф╕Аф╕кш┐ЫхМЦчЙИчЪДф║ТцЦещФБуАВ
цпФхжВя╝Мф║ТцЦещЗПхИЭхзЛхМЦф╣ЛхРОцШп1я╝Мх╝║ш░Гш┐Щф╕кцШпф╕║ф║Жч╗Щф┐бхП╖щЗПхБЪщУ║хЮлуАВ
шАМцИСф╗мчЪДф┐бхП╖щЗПхИЭхзЛхМЦф╣ЛхРОцШпNуАВ</p> <p>хОЯцЭея╝Мф║ТцЦещФБя╝МхПкшГ╜ф╛Ы1ф╕кч║┐чиЛхРМцЧ╢ф╜┐чФи
чО░хЬия╝Мф┐бхП╖щЗПя╝МхПпф╗ецМЗхоЪцИРNф╕кч║┐чиЛхРМцЧ╢ш┐ЗцЭея╝МшО╖хПЦш┐ЩцККщФБуАВя╝И<strong>цПРхНЗф║Жя╝МхЕ▒хРМшо┐щЧохЕ▒ф║лш╡Дц║РчЪДч║┐чиЛцХ░щЗП</strong>я╝Й
хе╜цпФ
ф╣░ф║ЖщЗПш╜жя╝Мх░Пш╜┐ш╜жхПпф╗еш╜╜4ф╕кф║║я╝Их╕ж4ф╕кч║┐чиЛя╝Й
ф╣░ф║Жф╕дф║║х║зчЪДя╝МщВгф╣ИхПпф╗еш╜╜1ф║║я╝Их╕жф╕Аф╕кч║┐чиЛя╝Й</p> <p>ш┐ЫхМЦчЙИчЪДф║ТцЦещФБя╝И1 --&gt; Nя╝Й</p> <blockquote><ul><li>ф║ТцЦещФБчЪДч▓Тх║жцпФш╛Гхдзя╝МхжВцЮЬцИСф╗мх╕МцЬЫхЬи<strong>хдЪф╕кч║┐чиЛ</strong>щЧ┤хп╣<strong>цЯРф╕Ахп╣ш▒б</strong>чЪД<strong>щГихИЖцХ░цНо</strong>ш┐ЫшбМхЕ▒ф║ля╝Мф╜┐чФиф║ТцЦещФБцШпц▓бцЬЙхКЮц│ХхоЮчО░чЪДя╝МхПкшГ╜х░ЖцХ┤ф╕кцХ░цНохп╣ш▒бщФБф╜ПуАВш┐Щца╖шЩ╜чД╢ш╛╛хИ░ф║ЖхдЪч║┐чиЛцУНф╜ЬхЕ▒ф║лцХ░цНоцЧ╢ф┐ЭшпБцХ░цНоцнгчбоцАзчЪДчЫочЪДя╝МхН┤цЧах╜вф╕нхп╝шЗ┤ч║┐чиЛчЪДх╣╢хПСцАзф╕ЛщЩНуАВч║┐чиЛф╗Ох╣╢шбМцЙзшбМя╝МхПШцИРф║Жф╕▓шбМцЙзшбМуАВф╕ОчЫ┤цОеф╜┐чФихНХш┐ЫчиЛцЧах╝ВуАВ</li> <li><strong>ф┐бхП╖щЗПя╝МцШпчЫ╕хп╣цКШф╕нчЪДф╕АчзНхдДчРЖцЦ╣х╝Пя╝МцЧвшГ╜ф┐ЭшпБхРМцнея╝МцХ░цНоф╕Нц╖╖ф╣▒я╝МхПИшГ╜цПРщлШч║┐чиЛх╣╢хПСуАВ</strong></li></ul></blockquote> <p>ф╕╗шжБх║ФчФихЗ╜цХ░я╝Ъ</p> <h3 id="_1я╝Йsem-initхЗ╜цХ░"><a href="#_1я╝Йsem-initхЗ╜цХ░" class="header-anchor">#</a> 1я╝Йsem_initхЗ╜цХ░</h3> <p>хИЭхзЛхМЦф╕Аф╕кф┐бхП╖щЗП</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">sem_init</span><span class="token punctuation">(</span><span class="token class-name">sem_t</span> <span class="token operator">*</span>sem<span class="token punctuation">,</span> <span class="token keyword">int</span> pshared<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>хПВ1я╝Ъsemф┐бхП╖щЗП	
хПВ2я╝ЪpsharedхПЦ0чФиф║Оч║┐чиЛщЧ┤я╝ЫхПЦщЭЮ0я╝Иф╕АшИмф╕║1я╝ЙчФиф║Ош┐ЫчиЛщЧ┤
хПВ3я╝ЪvalueцМЗхоЪф┐бхП╖щЗПхИЭхА╝</p> <h3 id="_2я╝Йsem-destroyхЗ╜цХ░"><a href="#_2я╝Йsem-destroyхЗ╜цХ░" class="header-anchor">#</a> 2я╝Йsem_destroyхЗ╜цХ░</h3> <h3 id="_3я╝Йsem-waitхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОхКащФБя╝Мшбичд║-я╝Й"><a href="#_3я╝Йsem-waitхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОхКащФБя╝Мшбичд║-я╝Й" class="header-anchor">#</a> 3я╝Йsem_waitхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОхКащФБя╝Мшбичд║--я╝Й</h3> <h3 id="_4я╝Йsem-trywaitхЗ╜цХ░"><a href="#_4я╝Йsem-trywaitхЗ╜цХ░" class="header-anchor">#</a> 4я╝Йsem_trywaitхЗ╜цХ░</h3> <h3 id="_5я╝Йsem-timedwaitхЗ╜цХ░"><a href="#_5я╝Йsem-timedwaitхЗ╜цХ░" class="header-anchor">#</a> 5я╝Йsem_timedwaitхЗ╜цХ░</h3> <p>щЩРцЧ╢х░ЭшпХхп╣ф┐бхП╖щЗПхКащФБ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">sem_timedwait</span><span class="token punctuation">(</span><span class="token class-name">sem_t</span> <span class="token operator">*</span>sem<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">timespec</span> <span class="token operator">*</span>abs_timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>хПВ2я╝Ъabs_timeoutщЗЗчФичЪДцШпч╗Эхп╣цЧ╢щЧ┤.</p> <h3 id="_6я╝Йsem-postхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОшзгщФБя╝Мшбичд║-я╝Й"><a href="#_6я╝Йsem-postхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОшзгщФБя╝Мшбичд║-я╝Й" class="header-anchor">#</a> 6я╝Йsem_postхЗ╜цХ░я╝ИчЫ╕х╜Уф║ОшзгщФБя╝Мшбичд║++я╝Й</h3> <p>ф╗еф╕К6 ф╕кхЗ╜цХ░чЪДш┐ФхЫЮхА╝щГ╜цШпя╝ЪцИРхКЯш┐ФхЫЮ0я╝М хд▒ш┤еш┐ФхЫЮ-1я╝МхРМцЧ╢шо╛ч╜оerrnoуАВ(ц│ицДПя╝МхоГф╗мц▓бцЬЙpthreadхЙНч╝А)
sem_tч▒╗хЮЛя╝МцЬмш┤иф╗НцШпч╗УцЮДф╜УуАВф╜Жх║ФчФицЬЯщЧ┤хПпчоАхНХчЬЛф╜Ьф╕║цХ┤цХ░я╝Мх┐╜чХехоЮчО░ч╗ЖшКВя╝Ич▒╗ф╝╝ф║Оф╜┐чФицЦЗф╗╢цППш┐░чмжя╝ЙуАВ
sem_t sem; шзДхоЪф┐бхП╖щЗП<code>semф╕НшГ╜&lt;0</code>
хд┤цЦЗф╗╢<code>&lt;semaphore.h&gt;</code></p> <h3 id="тАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭ-ф┐бхП╖щЗПя╝Иц│ицДПя╝МцпФш╛ГцЭбф╗╢хПШщЗПф╕ЛчЪДцибхЮЛя╝Й"><a href="#тАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭ-ф┐бхП╖щЗПя╝Иц│ицДПя╝МцпФш╛ГцЭбф╗╢хПШщЗПф╕ЛчЪДцибхЮЛя╝Й" class="header-anchor">#</a> тАЬчФЯф║зшАЕц╢Иш┤╣шАЕтАЭ-ф┐бхП╖щЗПя╝Иц│ицДПя╝МцпФш╛ГцЭбф╗╢хПШщЗПф╕ЛчЪДцибхЮЛя╝Й</h3> <p>хЕмхЕ▒хМ║хЯЯя╝МчФичЪДтАЬчОпх╜вщШЯхИЧтАЭ</p> <h2 id="хЕнуАБш┐ЫчиЛщЧ┤хРМцне"><a href="#хЕнуАБш┐ЫчиЛщЧ┤хРМцне" class="header-anchor">#</a> хЕнуАБш┐ЫчиЛщЧ┤хРМцне</h2> <p>цИСф╗мшпжч╗Жшо▓ф╕ЛщЭв2чзНщФБ</p> <p>1я╝Йф┐бхП╖щЗП
2я╝Йф║ТцЦещЗПф╣ЯхПпф╗е
3я╝ЙцЦЗф╗╢щФБ</p> <h3 id="ф║ТцЦещЗП"><a href="#ф║ТцЦещЗП" class="header-anchor">#</a> ф║ТцЦещЗП</h3> <p>ш┐ЫчиЛщЧ┤ф╣ЯхПпф╗еф╜┐чФиф║ТцЦещФБя╝МцЭеш╛╛хИ░хРМцнечЪДчЫочЪДуАВф╜Жх║ФхЬиpthread_mutex_initхИЭхзЛхМЦф╣ЛхЙНя╝Мф┐оцФ╣хЕ╢<strong>х▒ЮцАз</strong>ф╕║ш┐ЫчиЛщЧ┤хЕ▒ф║луАВmutexчЪДх▒ЮцАзф┐оцФ╣хЗ╜цХ░ф╕╗шжБцЬЙф╗еф╕ЛхЗаф╕куАВ</p> <p>ф╕╗шжБх║ФчФихЗ╜цХ░я╝Ъ</p> <h4 id="_1я╝Йpthread-mutexattr-t-mattr-ч▒╗хЮЛя╝Ъ"><a href="#_1я╝Йpthread-mutexattr-t-mattr-ч▒╗хЮЛя╝Ъ" class="header-anchor">#</a> 1я╝Йpthread_mutexattr_t mattr ч▒╗хЮЛя╝Ъ</h4> <p>чФиф║ОхоЪф╣ЙmutexщФБчЪДуАРх▒ЮцАзуАС</p> <h4 id="_2я╝Йpthread-mutexattr-initхЗ╜цХ░я╝Ъ"><a href="#_2я╝Йpthread-mutexattr-initхЗ╜цХ░я╝Ъ" class="header-anchor">#</a> 2я╝Йpthread_mutexattr_initхЗ╜цХ░я╝Ъ</h4> <p>хИЭхзЛхМЦф╕Аф╕кmutexх▒ЮцАзхп╣ш▒б</p> <h4 id="_3я╝Йint-pthread-mutexattr-init-pthread-mutexattr-t-attr"><a href="#_3я╝Йint-pthread-mutexattr-init-pthread-mutexattr-t-attr" class="header-anchor">#</a> 3я╝Йint pthread_mutexattr_init(pthread_mutexattr_t *attr);</h4> <pre><code>pthread_mutexattr_destroyхЗ╜цХ░я╝Ъ		
щФАцпБmutexх▒ЮцАзхп╣ш▒б (шАМщЭЮщФАцпБщФБ)
</code></pre> <h4 id="_4я╝Йint-pthread-mutexattr-destroy-pthread-mutexattr-t-attr"><a href="#_4я╝Йint-pthread-mutexattr-destroy-pthread-mutexattr-t-attr" class="header-anchor">#</a> 4я╝Йint pthread_mutexattr_destroy(pthread_mutexattr_t *attr);</h4> <h4 id="_5я╝Йpthread-mutexattr-setpsharedхЗ╜цХ░я╝Ъф┐оцФ╣mutexх▒ЮцАзуАВ"><a href="#_5я╝Йpthread-mutexattr-setpsharedхЗ╜цХ░я╝Ъф┐оцФ╣mutexх▒ЮцАзуАВ" class="header-anchor">#</a> 5я╝Йpthread_mutexattr_setpsharedхЗ╜цХ░я╝Ъ	ф┐оцФ╣mutexх▒ЮцАзуАВ</h4> <h4 id="_6я╝Йint-pthread-mutexattr-setpshared-pthread-mutexattr-t-attr-int-pshared"><a href="#_6я╝Йint-pthread-mutexattr-setpshared-pthread-mutexattr-t-attr-int-pshared" class="header-anchor">#</a> 6я╝Йint pthread_mutexattr_setpshared(pthread_mutexattr_t *attr, int pshared);</h4> <p>хПВ2я╝ЪpsharedхПЦхА╝я╝Ъ
ч║┐чиЛщФБя╝ЪPTHREAD_PROCESS_PRIVATE (mutexчЪДщ╗Шшодх▒ЮцАзхН│ф╕║ч║┐чиЛщФБя╝Мш┐ЫчиЛщЧ┤чзБцЬЙ)
ш┐ЫчиЛщФБя╝ЪPTHREAD_PROCESS_SHARED</p> <p>ш┐ЫчиЛщЧ┤ф╜┐чФиmutexцЭехоЮчО░хРМцнея╝Ъ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;fcntl.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;sys/mman.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;sys/wait.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">mt</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
    <span class="token class-name">pthread_mutex_t</span> mutex<span class="token punctuation">;</span>
    <span class="token class-name">pthread_mutexattr_t</span> mutexattr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> fd<span class="token punctuation">,</span> i<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">mt</span> <span class="token operator">*</span>mm<span class="token punctuation">;</span>
    <span class="token class-name">pid_t</span> pid<span class="token punctuation">;</span>

    fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;mt_test&quot;</span><span class="token punctuation">,</span> O_CREAT <span class="token operator">|</span> O_RDWR<span class="token punctuation">,</span> <span class="token number">0777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">ftruncate</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>mm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mm <span class="token operator">=</span> <span class="token function">mmap</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>mm<span class="token punctuation">)</span><span class="token punctuation">,</span> PROT_READ<span class="token operator">|</span>PROT_WRITE<span class="token punctuation">,</span> MAP_SHARED<span class="token punctuation">,</span> fd<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&quot;mt_test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//mm = mmap(NULL, sizeof(*mm), PROT_READ|PROT_WRITE, MAP_SHARED|MAP_ANON, -1, 0);</span>
    <span class="token function">memset</span><span class="token punctuation">(</span>mm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>mm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">pthread_mutexattr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutexattr<span class="token punctuation">)</span><span class="token punctuation">;</span>                                  <span class="token comment">//хИЭхзЛхМЦmutexх▒ЮцАзхп╣ш▒б</span>
    <span class="token function">pthread_mutexattr_setpshared</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutexattr<span class="token punctuation">,</span> PTHREAD_PROCESS_SHARED<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ф┐оцФ╣х▒ЮцАзф╕║ш┐ЫчиЛщЧ┤хЕ▒ф║л</span>
    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutexattr<span class="token punctuation">)</span><span class="token punctuation">;</span>                          <span class="token comment">//хИЭхзЛхМЦф╕АцККmutexчРР</span>

    pid <span class="token operator">=</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span>mm<span class="token operator">-&gt;</span>num<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;-child----num++   %d\n&quot;</span><span class="token punctuation">,</span> mm<span class="token operator">-&gt;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mm<span class="token operator">-&gt;</span>num <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;-parent---num+=2  %d\n&quot;</span><span class="token punctuation">,</span> mm<span class="token operator">-&gt;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">wait</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">pthread_mutexattr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutexattr<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">//щФАцпБmutexх▒ЮцАзхп╣ш▒б</span>
    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token operator">-&gt;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//щФАцпБmutex</span>
    <span class="token function">munmap</span><span class="token punctuation">(</span>mm<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>mm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                          <span class="token comment">//щЗКцФ╛цШах░ДхМ║</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>					
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="цЦЗф╗╢щФБя╝ИхАЯхКйfcntlхЗ╜цХ░цЭехоЮчО░щФБцЬ║хИ╢я╝Й"><a href="#цЦЗф╗╢щФБя╝ИхАЯхКйfcntlхЗ╜цХ░цЭехоЮчО░щФБцЬ║хИ╢я╝Й" class="header-anchor">#</a> цЦЗф╗╢щФБя╝ИхАЯхКйfcntlхЗ╜цХ░цЭехоЮчО░щФБцЬ║хИ╢я╝Й</h3> <p>я╝Ишо░х┐ЖцЦ╣ц│Хя╝Ъfile controlя╝Й</p> <p>цУНф╜ЬцЦЗф╗╢чЪДш┐ЫчиЛц▓бцЬЙшО╖х╛ЧщФБцЧ╢я╝МхПпф╗ецЙУх╝Ая╝Мф╜ЖцЧац│ХцЙзшбМreadуАБwriteцУНф╜ЬуАВ
fcntlхЗ╜цХ░я╝ЪшО╖хПЦуАБшо╛ч╜оцЦЗф╗╢шо┐щЧоцОзхИ╢х▒ЮцАзуАВ</p> <p>цИСф╗мф╗ехЙНчФиш┐Щф╕кф┐оцФ╣ш┐Зя╝МщШ╗хбЮхТМщЭЮщШ╗хбЮ</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">fcntl</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">int</span> cmd<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">/* arg */</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>хПВ2я╝Ъ</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>F_SETLK (struct flock *)	шо╛ч╜оцЦЗф╗╢щФБя╝Иtrylockя╝Й
F_SETLKW (struct flock *) шо╛ч╜оцЦЗф╗╢щФБя╝Иlockя╝ЙW --&gt; wait
F_GETLK (struct flock *)	шО╖хПЦцЦЗф╗╢щФБ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>уАРцАЭшАГуАСя╝ЪхдЪч║┐чиЛф╕ня╝МхПпф╗еф╜┐чФицЦЗф╗╢щФБхРЧя╝Я
хдЪч║┐чиЛщЧ┤хЕ▒ф║лцЦЗф╗╢цППш┐░чмжя╝МшАМч╗ЩцЦЗф╗╢хКащФБя╝МцШпщАЪш┐Зф┐оцФ╣цЦЗф╗╢цППш┐░чмжцЙАцМЗхРСчЪДцЦЗф╗╢ч╗УцЮДф╜Уф╕нчЪДцИРхСШхПШщЗПцЭехоЮчО░чЪДуАВхЫацндя╝МхдЪч║┐чиЛф╕нцЧац│Хф╜┐чФицЦЗф╗╢щФБуАВ</p> <h2 id="хУ▓хнжхо╢чФищдРцибхЮЛ"><a href="#хУ▓хнжхо╢чФищдРцибхЮЛ" class="header-anchor">#</a> хУ▓хнжхо╢чФищдРцибхЮЛ</h2> <p>цМпшНбя╝ЪхжВцЮЬцпПф╕кф║║щГ╜цФечЭАшЗкх╖▒х╖жцЙЛчЪДщФБя╝Мх░ЭшпХхО╗цЛ┐хП│цЙЛщФБя╝МцЛ┐ф╕НхИ░хИЩх░ЖщФБщЗКцФ╛уАВш┐Зф╝ЪхД┐ф║Фф╕кф║║хПИхРМцЧ╢хЖНцФечЭАх╖жцЙЛщФБх░ЭшпХцЛ┐хП│цЙЛщФБя╝Мф╛ЭчД╢цЛ┐ф╕НхИ░уАВхжВцндх╛АхдНх╜вцИРхПжхдЦф╕АчзНцЮБчлпцн╗щФБчЪДчО░ш▒бтАФтАФцМпшНбуАВ</p> <p>хжВф╜ХщБ┐хЕНш┐ЩчзНтАЬщЬЗшНбтАЭчЪДцн╗щФБя╝Я
щБ┐хЕНцМпшНбчО░ш▒бя╝ЪхПкщЬА5ф╕кф║║ф╕ня╝Мф╗╗цДПф╕Аф╕кф║║я╝МцЛ┐щФБчЪДцЦ╣хРСф╕ОхЕ╢ф╗Цф║║чЫ╕щАЖхН│хПп(хжВя╝ЪEя╝МхОЯцЭея╝Ъх╖жя╝Ъ4я╝МхП│я╝Ъ0	чО░хЬия╝Ъх╖жя╝Ъ0я╝М хП│я╝Ъ4)уАВ</p> <p>я╝ИчЙ╣члЛчЛмшбМ2333чЪДхУ▓хнжхо╢я╝Й</p> <h3 id="_1я╝ЙхдЪч║┐чиЛчЙИ"><a href="#_1я╝ЙхдЪч║┐чиЛчЙИ" class="header-anchor">#</a> 1я╝ЙхдЪч║┐чиЛчЙИ</h3> <h3 id="_2я╝ЙхдЪш┐ЫчиЛчЙИ"><a href="#_2я╝ЙхдЪш┐ЫчиЛчЙИ" class="header-anchor">#</a> 2я╝ЙхдЪш┐ЫчиЛчЙИ</h3></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.497fe22e.js" defer></script><script src="/assets/js/56.80334add.js" defer></script>
  </body>
</html>
